import{u as me}from"./index.df365b42.js";import{h as H,j as q,a2 as ue,d as Y,g as R,E as ge,o as se,c as ye,k as we,J as be,w as xe,b as Fe,L as pe,R as _e,l as de,e as ze,r as De,F as Re,a3 as T,Q as te,H as J,a4 as ne,a1 as Ne,A as I,D as ce,X as he,a5 as Se}from"./framework.28cd1f07.js";function He(e){const n=H(1200);q(()=>{c(),window.addEventListener("resize",t)}),ue(()=>{window.removeEventListener("resize",t)});const t=me(c);function c(){var o;n.value=((o=e.value)==null?void 0:o.getBoundingClientRect().width)||1200}return n}const Ze=Y({__name:"vp-demo",props:{source:{},demos:{},path:{}},setup(e){const n=e,t=H(),c=He(t),o=R(()=>n.path.startsWith("grid-layout")),u=R(()=>({border:"1px solid black",width:o.value?"":"100%",height:o.value?"":"300px"})),v=R(()=>{const F=Object.keys(n.demos);for(const i of F)if(i.replace("../examples/","").replace(".vue","")===n.path)return n.demos[i].default;return!1});return(F,i)=>{const s=ge("ClientOnly");return se(),ye(Re,null,[we("section",{ref_key:"wrapRef",ref:t,style:{width:"100%"}},[be(s,null,{default:xe(()=>[v.value?(se(),Fe(pe(v.value),{key:0,style:_e(u.value),width:de(c)},null,8,["style","width"])):ze("",!0)]),_:1})],512),De(F.$slots,"source")],64)}}});const ae=Symbol("Scene");function B(e,n={},t={},c={}){if(!e)return()=>null;const o={...n,...t};return u=>T(e,o,u)}function X(e,n,t=1/0){return Math.max(Math.min(e,t),n)}function Z(...e){}const ke=["xt","xc","xb","yl","yc","yr"],Me=Y({props:{showLine:Boolean},setup(){const e=te(ae),n=J(ke),t=R(()=>e.diff/e.transformScale),c=e.nodes,o=ne({xt:{show:!1,pos:0},xc:{show:!1,pos:0},xb:{show:!1,pos:0},yl:{show:!1,pos:0},yc:{show:!1,pos:0},yr:{show:!1,pos:0}}),u=s=>{var p;const m=((p=c.find(y=>y.uuid===s))==null?void 0:p.node)??{};v(),c.forEach(y=>{if(y.uuid===s)return;const d=F(m._rect),l=F(y.node._rect);i(d.top,l.top)&&(o.xt={show:!0,pos:l.top},m._rect.y=l.top),i(d.bottom,l.top)&&(o.xt={show:!0,pos:l.top},m._rect.y=l.top-d.height),i(d.centerY,l.centerY)&&(o.xc={show:!0,pos:l.centerY},m._rect.y=l.centerY-d.height/2),i(d.top,l.bottom)&&(o.xb={show:!0,pos:l.bottom},m._rect.y=l.bottom),i(d.bottom,l.bottom)&&(o.xb={show:!0,pos:l.bottom},m._rect.y=l.bottom-d.height),i(d.left,l.left)&&(o.yl={show:!0,pos:l.left},m._rect.x=l.left),i(d.right,l.left)&&(o.yl={show:!0,pos:l.left},m._rect.x=l.left-d.width),i(d.centerX,l.centerX)&&(o.yc={show:!0,pos:l.centerX},m._rect.x=l.centerX-d.width/2),i(d.left,l.right)&&(o.yr={show:!0,pos:l.right},m._rect.x=l.right),i(d.right,l.right)&&(o.yr={show:!0,pos:l.right},m._rect.x=l.right-d.width)})};e==null||e.on("move",u),e==null||e.on("moveup",v),ue(()=>{e==null||e.off("move"),e==null||e.off("moveup")});function v(){o.xt.show=!1,o.xc.show=!1,o.xb.show=!1,o.yl.show=!1,o.yc.show=!1,o.yr.show=!1}function F(s){return{deltaX:s.deltaX,deltaY:s.deltaY,top:s.y,bottom:s.y+s.height,left:s.x,right:s.x+s.width,width:s.width,height:s.height,centerX:s.x+s.width/2,centerY:s.y+s.height/2}}function i(s,m){return Math.abs(s-m)<=t.value}return{lines:n,diff:t,lineStatus:o}},render(){const e=(t,c)=>T("div",{style:{[t.includes("x")?"top":"left"]:c.pos+"px"},class:[t.includes("x")?"vv-free-dom--xline":"vv-free-dom--yline","vv-free-dom--line"]}),n=this.showLine?this.lines.filter(t=>this.lineStatus[t].show).map(t=>e(t,this.lineStatus[t])):[];return T("div",{class:"vv-free-dom--markline"},n)}});function U(){const e=Ne(),n=R(()=>typeof e.default=="function"?e.default():e.default),t=R(()=>{var c;return(c=n.value)==null?void 0:c[0]});return{slots:n,only:t}}function $e(e){const n=H(NaN),t=H(NaN);function c(o,u){const v=isNaN(n.value),F=de(e);if(!F)throw new Error("drag node does not exist");return v?{node:F,deltaX:0,deltaY:0,lastX:o,lastY:u,x:o,y:u}:{node:F,deltaX:o-n.value,deltaY:u-t.value,lastX:n.value,lastY:t.value,x:o,y:u}}return{lastX:n,lastY:t,create:c}}function Ee(e){const n=H(e.x||e.modelValue.x||0),t=H(e.y||e.modelValue.y||0),c=H(0),o=H(0),u=H();I(()=>{n.value=e.x||e.modelValue.x||0}),I(()=>{t.value=e.y||e.modelValue.y||0});const v=(m,p)=>{e.dragStartFn(m,p)},F=(m,p)=>{n.value=p.x,t.value=p.y,c.value=p.deltaX,o.value=p.deltaY,e.dragFn(m,p)},i=(m,p)=>{const y=u.value=s(p);e.dragStopFn(m,y)};function s(m){return{node:m.node,x:n.value+m.deltaX,y:t.value+m.deltaY,deltaX:m.deltaX,deltaY:m.deltaY,lastX:n.value,lastY:t.value}}return{x:n,y:t,deltaX:c,deltaY:o,create:s,handleDragStart:v,handleDrag:F,handleDragStop:i}}let We=0;function Ve(e,n){const t=te(ae,void 0),c=We++,o=R(()=>(t==null?void 0:t.handle)||n.handle),u=R(()=>(t==null?void 0:t.lockAspectRatio)||n.lockAspectRatio),v=R(()=>(t==null?void 0:t.minWidth)||n.minWidth),F=R(()=>(t==null?void 0:t.minHeight)||n.minHeight),i=R(()=>(t==null?void 0:t.disabledDrag)||n.disabledDrag),s=R(()=>(t==null?void 0:t.disabledResize)||n.disabledResize),m=R(()=>(t==null?void 0:t.scale)||n.scale),p=R(()=>(t==null?void 0:t.transformScale)||n.transformScale),y=R(()=>(t==null?void 0:t.fixNonMonospaced)||n.fixNonMonospaced);q(()=>{t==null||t.register(c,e)}),ce(()=>{t==null||t.remove(c)});function d(_){return t?t.checkValid(_):!0}function l(_){return t?t.correct(_):_}return{emit:_=>t==null?void 0:t.emit(_,c),check:d,correct:l,width:t==null?void 0:t.width,height:t==null?void 0:t.height,scale:m,handle:o,lockAspectRatio:u,minWidth:v,minHeight:F,disabledDrag:i,disabledResize:s,fixNonMonospaced:y,transformScale:p}}function Be(){const e=H({});return{on:(o,u)=>{e.value[o]?e.value[o].push(u):e.value[o]=[u]},off:o=>{e.value[o].length=0},emit:(o,u)=>{(e.value[o]||[]).forEach(F=>F(u))}}}function Le(e,n){const t=H(o()),c=H(u());I(()=>{t.value=o()}),I(()=>{c.value=u()});function o(){return e.width||e.modelValue.w}function u(){return e.height||e.modelValue.h}async function v(F,i,s){if(e.width&&e.height||e.modelValue.w&&e.modelValue.h)return;if(!n.value)return[0,0];F&&await document.fonts.ready;const{width:m,height:p}=window.getComputedStyle(n.value.$el);t.value=Math.max(Math.ceil(parseFloat(m)),i),c.value=Math.max(Math.ceil(parseFloat(p)),s)}return{width:t,height:c,syncSize:v}}function Xe(e){const n=J(e.modelValue);I(()=>{n.value=e.modelValue});const t=R(()=>{var h;return(e.width-u.value[0]*(c.value-1)-(((h=F.value)==null?void 0:h[0])||u.value[0])*2)/e.cols}),c=R(()=>e.cols),o=R(()=>e.rowHeight),u=R(()=>e.margin),v=R(()=>e.maxRows),F=R(()=>e.containerPadding),i=R(()=>e.minW),s=R(()=>e.minH);function m(h){return n.value.find(a=>a.i===h)}function p(){return n.value}function y(h,a,f,r,b,x){if(a.static||a.y===r&&a.x===f)return h;Z(`Moving element ${a.i} to [${String(f)},${String(r)}] from [${a.x},${a.y}]`);const D=a.x,k=a.y;typeof f=="number"&&(a.x=f),typeof r=="number"&&(a.y=r),a.moved=!0;const j=N(h).filter(V=>w(V,a));return j.length>0&&x?(a.x=D,a.y=k,a.moved=!1,h):(j.forEach(V=>{Z(`Resolving collision between ${a.i} at [${a.x},${a.y}] and ${V.i} at [${V.x},${V.y}]`,V.moved,V.i),!V.moved&&(V.static?h=d(h,V,a,b):h=d(h,a,V,b))}),h)}function d(h,a,f,r){const b=a.static;if(r){r=!1;const x={x:f.x,y:Math.max(a.y-f.h,0),w:f.w,h:f.h,i:"-1"};if(!M(h,x))return Z(`Doing reverse collision on ${f.i} up to [${x.x},${x.y}].`),y(h,f,void 0,x.y,r,b)}return y(h,f,void 0,f.y+1,r,b)}function l(h,a,f){const b=y(n.value,h,a,f,!0,!e.collision);return n.value=g(b),n.value}function _(h,a,f){let r=!1;if(!e.collision){const b=n.value.filter(x=>w(x,{...h,w:a,h:f}));if(r=b.length>0,r){let x=1/0,D=1/0;b.forEach(k=>{k.x>h.x&&(x=Math.min(k.x,x)),k.y>h.y&&(D=Math.min(k.y,D))}),Number.isFinite(x)&&(h.w=x-h.x),Number.isFinite(D)&&(h.h=D-h.y)}}r||(h.w=a,h.h=f),n.value=g([...n.value])}function N(h){return h.slice(0).sort((a,f)=>a.y>f.y||a.y===f.y&&a.x>f.x?1:a.y===f.y&&a.x===f.x?0:-1)}function w(h,a){return h.i===a.i||h.x+h.w<=a.x||h.x>=a.x+a.w||h.y+h.h<=a.y?!1:!(h.y>=a.y+a.h)}function M(h,a){for(let f=0;f<h.length;++f)if(w(h[f],a))return h[f]}function g(h){const a=h.filter(b=>b.static),f=N(h),r=new Array(h.length);return f.forEach((b,x)=>{let D=JSON.parse(JSON.stringify(b));D.static||(D=z(a,D,f),a.push(D)),r[h.indexOf(f[x])]=D,D.moved=!1}),r}function z(h,a,f){if(e.collision)for(a.y=Math.min(S(h),a.y);a.y>0&&!M(h,a);)--a.y;let r;for(;(r=M(h,a))&&e.collision;)E(f,a,r.y+r.h,"y");return a}function S(h){let a=0;return h.forEach(f=>{const r=f.y+f.h;r>a&&(a=r)}),a}function $(){var a;if(!e.autoHeight)return;const h=S(n.value);return`${h*e.rowHeight+u.value[1]*(h-1)+(((a=F.value)==null?void 0:a[1])||u.value[1])*2}px`}const W={x:"w",y:"h"};function E(h,a,f,r){const b=W[r];a[r]+=1;const x=h.findIndex(D=>D===a);for(let D=x+1;D<h.length;++D){const k=h[D];if(k.y>a.y+a.h)break;w(a,k)&&E(h,k,f+a[b],r)}a[r]=f}return{cellWidth:t,cols:c,rowHeight:o,margin:u,maxRows:v,containerPadding:F,minW:i,minH:s,calContainerHeight:$,moveTo:l,resizeTo:_,getItem:m,getFull:p}}function Ye(e,n){const{cellWidth:t,margin:c,rowHeight:o,cols:u,maxRows:v,containerPadding:F}=n,i=H(),s=H(),m=R(()=>F.value||c.value),p=R(()=>i.value?Math.round(i.value.x):Math.round(e.x*(t.value+c.value[0])+m.value[0])),y=R(()=>i.value?Math.round(i.value.y):Math.round(e.y*(o.value+c.value[1])+m.value[1])),d=R(()=>s.value?Math.round(s.value.width):Math.round(t.value*e.width+Math.max(0,e.width-1)*c.value[0])),l=R(()=>s.value?Math.round(s.value.height):Math.round(o.value*e.height+Math.max(0,e.height-1)*c.value[1])),_=R(()=>{const a=n.minW.value;return Math.round(t.value*a+Math.max(0,a-1)*c.value[0])}),N=R(()=>{const a=n.minH.value;return Math.round(o.value*a+Math.max(0,a-1)*c.value[1])}),w=R(()=>({position:"absolute",width:`${d.value}px`,height:`${l.value}px`,transform:`translate(${p.value}px, ${y.value}px)`})),M=(a,{node:f})=>{const r=f.offsetParent.getBoundingClientRect(),b=f.getBoundingClientRect();i.value={x:b.left-r.left+f.offsetParent.scrollLeft,y:b.top-r.top+f.offsetParent.scrollTop}},g=(a,f)=>{if(!i.value)throw new Error("onDrag called before onDragStart");const{deltaX:r,deltaY:b}=f,x=i.value.x+r,D=i.value.y+b;i.value={x,y:D};const{x:k,y:P}=E(x,D);e.dragFn(a,{x:k,y:P})},z=a=>{if(!i.value)throw new Error("onDragStop called before onDratStart");const{x:f,y:r}=i.value,{x:b,y:x}=E(f,r);i.value=void 0,e.dragEndFn(a,{x:b,y:x})},S=(a,{width:f,height:r})=>{s.value={width:f,height:r}},$=(a,f)=>{const{width:r,height:b}=f,{w:x,h:D}=h(r,b);s.value={width:r,height:b},e.resizeFn(a,{w:x,h:D})},W=(a,f)=>{s.value=void 0;const{width:r,height:b}=f,{w:x,h:D}=h(r,b);e.resizeStopFn(a,{w:x,h:D})};function E(a,f){let r=Math.round((a-c.value[0])/(t.value+c.value[0])),b=Math.round((f-c.value[1])/(o.value+c.value[1]));return r=X(r,0,u.value-e.width),b=X(b,0,v.value-e.height),{x:r,y:b}}function h(a,f){let r=Math.round((a+c.value[0])/(t.value+c.value[0])),b=Math.round((f+c.value[1])/(o.value+c.value[1]));return r=X(r,0,u.value-e.x),b=X(b,0,v.value-e.y),{w:r,h:b}}return{x:p,y,width:d,height:l,dragging:i,resizing:s,style:w,minWidth:_,minHeight:N,onDragStart:M,onDrag:g,onDragStop:z,onResizeStart:S,onResize:$,onResizeStop:W}}function C(){}const Pe={userSelectHack:{type:Boolean,default:!0},startFn:{type:Function,default:C},stopFn:{type:Function,default:C},dragFn:{type:Function,default:C},disabled:Boolean,scale:{type:Number,default:1}},ie=Y({name:"FreeDomCore",props:Pe,setup(e){const{only:n}=U(),t=H(!1),c=H(),o=R(()=>{var g;return((g=c.value)==null?void 0:g.$el)||c.value}),u=R(()=>{var g;return(g=o.value)==null?void 0:g.ownerDocument}),{lastX:v,lastY:F,create:i}=$e(o);let s,m;ce(()=>{u.value&&(e.userSelectHack&&l(u.value),u.value.removeEventListener("mousemove",w),u.value.removeEventListener("mouseup",N))});function p(g){return _(g)}function y(g){N(g)}function d(g){if(g){if(!g.getElementById("free-dom-style-el")){const z=g.createElement("style");z.id="free-dom-style-el",z.innerHTML=".free-dom-transparent-selection *::selection {all: inherit;}",g.getElementsByTagName("head")[0].appendChild(z)}g.body&&g.body.classList.add("free-dom-transparent-selection")}}function l(g){if(!g)return;g.body&&g.body.classList.remove("free-dom-transparent-selection");const z=g.getSelection();z&&z.removeAllRanges()}function _(g){var W,E;if(e.disabled||!g.target||!(g.target instanceof o.value.ownerDocument.defaultView.Node))return;const{x:z,y:S}=M(g),$=i(z,S);e.startFn(g,$),v.value=z,F.value=S,t.value=!0,e.userSelectHack&&d(u.value),(W=u.value)==null||W.addEventListener("mousemove",w),(E=u.value)==null||E.addEventListener("mouseup",N)}function N(g){var W,E;if(!t.value)return;const{x:z,y:S}=M(g),$=i(z,S);e.stopFn(g,$),e.userSelectHack&&l(u.value),t.value=!1,v.value=NaN,F.value=NaN,(W=u.value)==null||W.removeEventListener("mousemove",w),(E=u.value)==null||E.removeEventListener("mouseup",N)}function w(g){const{x:z,y:S}=M(g),$=i(z,S);e.dragFn(g,$),v.value=z,F.value=S}function M(g){var E;const z=((E=o.value)==null?void 0:E.offsetParent)||u.value.body,S=z===z.ownerDocument.body;(!s||s!==z)&&(s=z,m=S?{left:0,top:0}:z.getBoundingClientRect());const $=(g.clientX+z.scrollLeft-m.left)/e.scale,W=(g.clientY+z.scrollTop-m.top)/e.scale;return{x:$,y:W}}return{only:n,coreRef:c,mousedownFn:p,mouseupFn:y}},render(){this.mouseupFn;const e={onMousedown:t=>{t.stopPropagation(),this.mousedownFn(t)},onMouseup:this.mouseupFn},n=B(this.only,{ref:t=>{this.coreRef=t}},e,{});return typeof n=="function"?n():n}}),Ie=["t","r","l","b","lt","lb","rt","rb"];function ee(){}const G={dragOpts:{type:Object,default:()=>({})},width:{type:Number,default:0},height:{type:Number,default:0},scale:{type:[Boolean,Array],default:void 0},startFn:{type:Function,default:ee},stopFn:{type:Function,default:ee},resizeFn:{type:Function,default:ee},minWidth:{type:Number,default:50},minHeight:{type:Number,default:50},lockAspectRatio:Boolean},fe=Y({name:"ResizeDomCore",props:G,setup(e,{slots:n}){const{slots:t}=U(),c=R(()=>{const i=e.scale;return Array.isArray(i)?i:Ie}),o=J();function u(i,s){const{lockAspectRatio:m}=e;if(!e.minHeight&&!e.minWidth&&!m)return[i,s];if(m){const p=e.width/e.height,y=i-e.width,d=s-e.height;Math.abs(y)>Math.abs(d*p)?s=i/p:i=s*p}return i=Math.max(i,e.minWidth),s=Math.max(s,e.minHeight),[i,s]}function v(i,s){return(m,{node:p,deltaX:y,deltaY:d})=>{i==="start"&&(o.value=void 0);const l=s!=="t"&&s!=="b",_=s!=="l"&&s!=="r",N=s[0],w=s[s.length-1],M=p.getBoundingClientRect();o.value=M,N==="l"&&(y=-y),w==="t"&&(d=-d);let g=e.width+(l?y:0),z=e.height+(_?d:0);[g,z]=u(g,z);const S=g!==e.width||z!==e.height,$=`${i}Fn`,W=typeof e[$]=="function"?e[$]:null;W&&!(i==="resize"&&!S)&&W(m,{node:p,width:g,height:z,handle:s}),i==="stop"&&(o.value=void 0)}}function F(i){return n.handler?()=>{var s;return(s=n.handler)==null?void 0:s.call(n,i)}:()=>T("i",{class:["vv-resize-dom--handler",`vv-resize-dom--handler__${i}`]})}return{dots:c,children:t,handleResize:v,renderResizehandler:F}},render(){const e=[...this.children||[],this.dots.map(n=>B(ie,{class:[this.dragOpts.disabled&&"vv-resize-dom--disabled"]},{...this.dragOpts,stopFn:this.handleResize("stop",n),startFn:this.handleResize("start",n),dragFn:this.handleResize("resize",n)})(this.renderResizehandler(n)))];return B("div",{class:"vv-resize-dom--box"})(e)}});function A(){}const L={modelValue:{type:Object,default:()=>({})},x:{type:Number,default:0},y:{type:Number,default:0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},handle:{type:String,default:void 0},lockAspectRatio:Boolean,dragStartFn:{type:Function,default:A},dragStopFn:{type:Function,default:A},dragFn:{type:Function,default:A},resizeStartFn:{type:Function,default:A},resizeFn:{type:Function,default:A},resizeStopFn:{type:Function,default:A},autoSize:{type:Boolean,default:!0},minWidth:G.minWidth,minHeight:G.minHeight,disabledDrag:Boolean,disabledResize:Boolean,scale:G.scale,transformScale:{type:Number,default:1},fixNonMonospaced:Boolean},Ae=Y({name:"FreeDom",props:L,emits:["update:width","update:height","update:x","update:y","update:modelValue"],setup(e,{emit:n,expose:t,slots:c}){const o=H(),{x:u,y:v,deltaX:F,deltaY:i,create:s,handleDragStart:m,handleDrag:p,handleDragStop:y}=Ee(e),{width:d,height:l,syncSize:_}=Le(e,o),N={_rect:ne({x:u,y:v,width:d,height:l,deltaX:F,deltaY:i}),trigger:r=>{n("update:modelValue",r)}},w=Ve(N,e),M=()=>{_(w.fixNonMonospaced.value,w.minWidth.value,w.minHeight.value)},g=H(!1);q(()=>{e.autoSize&&M();const r=w.correct(N._rect);N.trigger({x:r.x,y:r.y,w:r.width,h:r.height})});const z=R(()=>({width:`${d.value}px`,height:`${l.value}px`,transform:`translate(${u.value}px, ${v.value}px)`})),S=(r,b)=>{var P;if(!g.value)return;const x=s(b),D={x:x.x,y:x.y,width:d.value,height:l.value};(P=w.check)!=null&&P.call(w,D)&&(p(r,x),w.emit("move"))},$=(r,b)=>{var k;if(!g.value)return;const x={x:u.value,y:v.value,width:d.value,height:l.value};((k=w.check)==null?void 0:k.call(w,x))||(u.value=X(u.value,0,w.width),v.value=X(v.value,0,w.height)),y(r,b),w.emit("moveup"),n("update:x",u.value),n("update:y",v.value),n("update:modelValue",{x:u.value,y:v.value,w:d.value,h:l.value})},W=(r,b)=>{const x=w.handle.value;x?x.startsWith(".")?g.value=r.target.classList.contains(x.slice(1)):x.startsWith("#")?g.value=r.target.id===x.slice(1):(console.warn(`[free-dom] can not find element with ${x}`),g.value=!0):g.value=!0,g.value&&m(r,b)},E=(r,{node:b,width:x,height:D,handle:k})=>{var oe;const P=-(x-d.value),j=-(D-l.value),le=k[0],V=k[k.length-1];let K=u.value,Q=v.value;le==="l"&&(K+=P),V==="t"&&(Q+=j),(oe=w.check)!=null&&oe.call(w,{x:K,y:Q,width:x,height:D})&&(d.value=x,l.value=D,u.value=K,v.value=Q,e.resizeFn(r,{node:b,width:x,height:D,handle:k}),w==null||w.emit("move"))},h=(r,b)=>{var D;((D=w.check)==null?void 0:D.call(w,{x:u.value,y:v.value,width:d.value,height:l.value}))||(u.value=X(u.value,0,w.width),v.value=X(v.value,0,w.height)),e.resizeStopFn(r,b),n("update:width",d.value),n("update:height",l.value),n("update:modelValue",{x:u.value,y:v.value,w:d.value,h:l.value}),w.emit("moveup")},a=(r,b)=>{e.resizeStartFn(r,b)},f=()=>{const r={width:d.value,height:l.value,lockAspectRatio:w.lockAspectRatio.value,dragOpts:{disabled:w.disabledResize.value,scale:w.transformScale.value},startFn:a,resizeFn:E,stopFn:h,minHeight:w.minHeight.value,minWidth:w.minWidth.value,scale:w.scale.value};return B(fe,{},r)(c)};return t==null||t({syncSize:M}),{domRef:o,style:z,onDragStop:$,onDrag:S,onDragStart:W,resizeNode:f,disabled:w.disabledDrag}},render(){var t;const e={startFn:this.onDragStart,stopFn:this.onDragStop,dragFn:this.onDrag,disabled:this.disabled},n=()=>this.resizeNode();return(t=B(ie,{ref:"domRef",class:["vv-free-dom--draggable",this.disabled&&"vv-free-dom--draggable__disabled"],style:this.style},e))==null?void 0:t(n)}}),Oe={width:{type:Number,default:void 0},height:{type:Number,default:void 0},diff:{type:Number,default:2},showLine:{type:Boolean,default:!0},transformScale:{type:Number,default:1},handle:L.handle,minWidth:L.minWidth,minHeight:L.minHeight,lockAspectRatio:L.lockAspectRatio,disabledDrag:L.disabledDrag,disabledResize:L.disabledResize,scale:L.scale,fixNonMonospaced:L.fixNonMonospaced},Ge=Y({name:"FreeDomWrap",props:Oe,setup(e){const{slots:n}=U(),t=Be(),c=J(),o=H([]),u=H(e.width),v=H(e.height);I(()=>{u.value=e.width}),I(()=>{v.value=e.height}),q(()=>{var y,d;if(!e.width||!e.height){c.value||console.warn("[free-dom] cannot find element, width or height may be set to 0");const l=(y=c.value)==null?void 0:y.clientHeight,_=(d=c.value)==null?void 0:d.clientWidth;e.width||(u.value=_||0),e.height||(v.value=l||0)}o.value.forEach(l=>{const{x:_,y:N,width:w,height:M}=m(l.node._rect);l.node._rect.x=_,l.node._rect.y=N,l.node._rect.width=w,l.node._rect.height=M,l.node.trigger({x:_,y:N,w,h:M})})});function F(y,d){o.value.push({uuid:y,node:d})}function i(y){const d=o.value.findIndex(l=>l.uuid===y);o.value.splice(d,1)}function s(y){const{x:d,y:l,width:_,height:N}=y;return d>=0&&d+_<=u.value&&l>=0&&l+N<=v.value}function m(y){let d=Math.max(y.x,0),l=Math.max(y.y,0),_=y.width,N=y.height;return y.x+y.width>u.value&&(d=u.value-y.width,d<0&&(_=u.value,d=0)),y.y+y.height>v.value&&(l=v.value-y.height,l<0&&(N=v.value,l=0)),{x:d,y:l,width:_,height:N}}he(ae,ne({...Se(e),nodes:o,width:u,height:v,register:F,remove:i,checkValid:s,correct:m,on:t.on,off:t.off,emit:t.emit}));const p=R(()=>({width:`${e.width}px`,height:`${e.height}px`}));return{rectRef:c,style:p,slots:n}},render(){const e=B(Me,{},{showLine:this.showLine})(),n=[this.slots,e];return B("section",{ref:"rectRef",class:"vv-free-dom--scene",style:this.style})(n)}}),ve=Symbol("gridLayoutContext"),O=()=>{},Te={x:{type:Number,required:!0},y:{type:Number,required:!0},width:{type:Number,required:!0},height:{type:Number,required:!0},dragStartFn:{type:Function,default:O},dragFn:{type:Function,default:O},dragEndFn:{type:Function,default:O},resizeStartFn:{type:Function,default:O},resizeFn:{type:Function,default:O},resizeStopFn:{type:Function,default:O},isDraggable:Boolean,isResizable:Boolean,scale:{type:G.scale.type,default:()=>["rb"]}},je=["dragMove"],re=Y({name:"GridItem",props:Te,emits:je,setup(e){const n=te(ve);if(!n)throw new Error("TODO");const{x:t,y:c,width:o,height:u,dragging:v,style:F,minWidth:i,minHeight:s,onDragStart:m,onDrag:p,onDragStop:y,onResizeStart:d,onResize:l,onResizeStop:_}=Ye(e,n),{only:N,slots:w}=U(),M=z=>{const S={width:o.value,height:u.value,scale:e.scale,dragOpts:{disabled:!e.isResizable},minWidth:i.value,minHeight:s.value,startFn:d,resizeFn:l,stopFn:_};return B(fe,{},S)(()=>z)};return{x:t,y:c,width:o,height:u,child:N,slots:w,style:F,dragging:v,onDragStart:m,onDrag:p,onDragStop:y,onResizeStart:d,onResize:l,onResizeStop:_,dragNode:z=>{const S={class:[v.value&&"vv-grid-layout--item__draggable","vv-grid-layout--item",!e.isDraggable&&"vv-grid-layout--item__disabled"],style:F.value},$={disabled:!e.isDraggable,startFn:m,stopFn:y,dragFn:p};return B(ie,S,$)(()=>M(z))}}},render(){const e=this.slots;return this.dragNode(e)}}),qe={modelValue:{type:Array,required:!0,default:()=>[]},autoHeight:{type:Boolean,default:!0},cols:{type:Number,default:12},maxRows:{type:Number,default:1/0},minW:{type:Number,default:1},minH:{type:Number,default:1},rowHeight:{type:Number,default:150},width:{type:Number,default:1200},margin:{type:Array,default:()=>[10,10]},containerPadding:{type:Array,default:void 0},disabledDrag:Boolean,disabledResize:Boolean,collision:Boolean},Je=Y({name:"GridLayout",inheritAttrs:!1,props:qe,emits:["update:modelValue"],setup(e,{emit:n}){const t=Xe(e);he(ve,t);const c=H(null);function o(v){const F=v.key;if(!F)return;const i=t.getItem(String(F));if(!i)return;const s=!i.static&&!e.disabledDrag,m=!i.static&&!e.disabledResize,p={x:i.x,y:i.y,width:i.w,height:i.h,isDraggable:s,isResizable:m,scale:i.scale,dragEndFn:(y,d)=>{const{x:l,y:_}=d,N=t.moveTo(i,l,_);n("update:modelValue",N),c.value=null},dragStartFn:()=>{},dragFn:(y,d)=>{if(!i)return;const l={x:i.x,y:i.y,width:i.w,height:i.h},{x:_,y:N}=d;t.moveTo(i,_,N),c.value=l},resizeFn:(y,d)=>{const l={x:i.x,y:i.y,width:i.w,height:i.h};c.value=l;const{w:_,h:N}=d;t.resizeTo(i,_,N)},resizeStopFn:(y,d)=>{const{w:l,h:_}=d;t.resizeTo(i,l,_),c.value=null}};return B(re,{},p)({default:()=>v})}function u(){if(!c.value)return null;const{x:v,y:F,width:i,height:s}=c.value;return B(re,{class:"vv-grid-layout--placeholder"},{x:v,y:F,width:i,height:s,move:!1})()}return{processItem:o,placeholder:u,layout:t}},render(){const e={...this.$attrs.style||{},height:this.layout.calContainerHeight()},n=typeof this.$slots.default=="function"?this.$slots.default():this.$slots.default||[];return T("div",{class:"vv-grid-layout",style:e},[n.map(this.processItem),this.placeholder()])}}),Ce=Ge,et=Je,tt=Ae;export{tt as F,et as G,Ze as _,Ce as a};
