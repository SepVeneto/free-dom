import{l as Z,h as D,j as q,a2 as ue,d as Y,g as z,E as fe,o as ie,c as ve,k as me,J as ye,w as ge,b as we,L as be,R as pe,e as xe,r as Fe,F as ze,Q as ee,H as C,a3 as te,a4 as B,a1 as _e,a5 as Re,A as P,D as De,a0 as Ne,X as de,a6 as ke}from"./framework.9199ecdb.js";var le;const He=typeof window<"u",se=()=>{};He&&((le=window==null?void 0:window.navigator)!=null&&le.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Se(e){return typeof e=="function"?e():Z(e)}function $e(e,a){function t(...r){return new Promise((l,c)=>{Promise.resolve(e(()=>a.apply(this,r),{fn:a,thisArg:this,args:r})).then(l).catch(c)})}return t}function Me(e,a=!0,t=!0,r=!1){let l=0,c,m=!0,f=se,o;const i=()=>{c&&(clearTimeout(c),c=void 0,f(),f=se)};return x=>{const p=Se(e),v=Date.now()-l,d=()=>o=x();if(i(),p<=0)return l=Date.now(),d();if(v>p&&(t||!m))l=Date.now(),d();else if(a)return new Promise((N,H)=>{f=r?H:N,c=setTimeout(()=>{l=Date.now(),m=!0,N(d()),i()},p-v)});return!t&&!c&&(c=setTimeout(()=>m=!0,p)),m=!1,o}}function Ee(e,a=200,t=!1,r=!0,l=!1){return $e(Me(a,t,r,l),e)}function Be(e){const a=D(1200);q(()=>{r(),window.addEventListener("resize",t)}),ue(()=>{window.removeEventListener("resize",t)});const t=Ee(r);function r(){var l;a.value=((l=e.value)==null?void 0:l.getBoundingClientRect().width)||1200}return a}const tt=Y({__name:"vp-demo",props:{source:{},demos:{},path:{}},setup(e){const a=e,t=D(),r=Be(t),l=z(()=>a.path.startsWith("grid-layout")),c=z(()=>({border:"1px solid black",width:l.value?"":"100%",height:l.value?"":"300px"})),m=z(()=>{const f=Object.keys(a.demos);for(const o of f)if(o.replace("../examples/","").replace(".vue","")===a.path)return console.log(a.demos[o].default,a.path),a.demos[o].default;return!1});return(f,o)=>{const i=fe("ClientOnly");return ie(),ve(ze,null,[me("section",{ref_key:"wrapRef",ref:t,style:{width:"100%"}},[ye(i,null,{default:ge(()=>[m.value?(ie(),we(be(m.value),{key:0,style:pe(c.value),width:Z(r)},null,8,["style","width"])):xe("",!0)]),_:1})],512),Fe(f.$slots,"source")],64)}}});const ne=Symbol("Scene");function X(e,a,t=1/0){return Math.max(Math.min(e,t),a)}function U(...e){}const Ve=["xt","xc","xb","yl","yc","yr"],We=Y({props:{showLine:Boolean},setup(){const e=ee(ne),a=C(Ve),t=D(e.diff),r=e.nodes,l=te({xt:{show:!1,pos:0},xc:{show:!1,pos:0},xb:{show:!1,pos:0},yl:{show:!1,pos:0},yc:{show:!1,pos:0},yr:{show:!1,pos:0}}),c=i=>{var x;const y=((x=r.find(p=>p.uuid===i))==null?void 0:x.node)??{};m(),r.forEach(p=>{if(p.uuid===i)return;const v=f(y._rect),d=f(p.node._rect);o(v.top,d.top)&&(l.xt={show:!0,pos:d.top},y._rect.y=d.top),o(v.bottom,d.top)&&(l.xt={show:!0,pos:d.top},y._rect.y=d.top-v.height),o(v.centerY,d.centerY)&&(l.xc={show:!0,pos:d.centerY},y._rect.y=d.centerY-v.height/2),o(v.top,d.bottom)&&(l.xb={show:!0,pos:d.bottom},y._rect.y=d.bottom),o(v.bottom,d.bottom)&&(l.xb={show:!0,pos:d.bottom},y._rect.y=d.bottom-v.height),o(v.left,d.left)&&(l.yl={show:!0,pos:d.left},y._rect.x=d.left),o(v.right,d.left)&&(l.yl={show:!0,pos:d.left},y._rect.x=d.left-v.width),o(v.centerX,d.centerX)&&(l.yc={show:!0,pos:d.centerX},y._rect.x=d.centerX-v.width/2),o(v.left,d.right)&&(l.yr={show:!0,pos:d.right},y._rect.x=d.right),o(v.right,d.right)&&(l.yr={show:!0,pos:d.right},y._rect.x=d.right-v.width)})};e==null||e.on("move",c),e==null||e.on("moveup",m),ue(()=>{e==null||e.off("move"),e==null||e.off("moveup")});function m(){l.xt.show=!1,l.xc.show=!1,l.xb.show=!1,l.yl.show=!1,l.yc.show=!1,l.yr.show=!1}function f(i){return{deltaX:i.deltaX,deltaY:i.deltaY,top:i.y,bottom:i.y+i.height,left:i.x,right:i.x+i.width,width:i.width,height:i.height,centerX:i.x+i.width/2,centerY:i.y+i.height/2}}function o(i,y){return Math.abs(i-y)<=t.value}return{lines:a,diff:t,lineStatus:l}},render(){const e=(t,r)=>B("div",{style:{[t.includes("x")?"top":"left"]:r.pos+"px"},class:[t.includes("x")?"vv-free-dom--xline":"vv-free-dom--yline","vv-free-dom--line"]}),a=this.showLine?this.lines.filter(t=>this.lineStatus[t].show).map(t=>e(t,this.lineStatus[t])):[];return B("div",{class:"vv-free-dom--markline"},a)}});function J(){const e=_e(),a=z(()=>typeof e.default=="function"?e.default():e.default),t=z(()=>{var r;return((r=a.value)==null?void 0:r.filter(l=>l.type!==Re)[0])||null});return{slots:a,only:t}}function Le(e){const a=D(NaN),t=D(NaN);function r(l,c){const m=isNaN(a.value),f=Z(e);if(!f)throw new Error("drag node does not exist");return m?{node:f,deltaX:0,deltaY:0,lastX:l,lastY:c,x:l,y:c}:{node:f,deltaX:l-a.value,deltaY:c-t.value,lastX:a.value,lastY:t.value,x:l,y:c}}return{lastX:a,lastY:t,create:r}}function Xe(e){const a=D(e.x||e.modelValue.x||0),t=D(e.y||e.modelValue.y||0),r=D(0),l=D(0),c=D();P(()=>{a.value=e.x||e.modelValue.x||0}),P(()=>{t.value=e.y||e.modelValue.y||0});const m=(i,y)=>{a.value=y.x,t.value=y.y,r.value=y.deltaX,l.value=y.deltaY,e.dargFn(i,y)},f=(i,y)=>{const x=c.value=o(y);e.dragStopFn(i,x)};function o(i){return{node:i.node,x:a.value+i.deltaX,y:t.value+i.deltaY,deltaX:i.deltaX,deltaY:i.deltaY,lastX:a.value,lastY:t.value}}return{x:a,y:t,deltaX:r,deltaY:l,create:o,handleDrag:m,handleDragStop:f}}let Ye=0;function Pe(e,a){const t=ee(ne,void 0),r=Ye++,l=z(()=>(t==null?void 0:t.lockAspectRatio)||a.lockAspectRatio),c=z(()=>(t==null?void 0:t.minWidth)||a.minWidth),m=z(()=>(t==null?void 0:t.minHeight)||a.minHeight),f=z(()=>(t==null?void 0:t.disabledDrag)||a.disabledDrag),o=z(()=>(t==null?void 0:t.disabledResize)||a.disabledResize),i=z(()=>(t==null?void 0:t.scale)||a.scale),y=z(()=>(t==null?void 0:t.fixNonMonospaced)||a.fixNonMonospaced);q(()=>{t==null||t.register(r,e)});function x(p){return t?t.checkValid(p):!0}return{emit:p=>t==null?void 0:t.emit(p,r),check:x,width:t==null?void 0:t.width,height:t==null?void 0:t.height,scale:i,lockAspectRatio:l,minWidth:c,minHeight:m,disabledDrag:f,disabledResize:o,fixNonMonospaced:y}}function Ae(){const e=D({});return{on:(l,c)=>{e.value[l]?e.value[l].push(c):e.value[l]=[c]},off:l=>{e.value[l].length=0},emit:(l,c)=>{(e.value[l]||[]).forEach(f=>f(c))}}}function Ie(e,a){const t=D(l()),r=D(c());P(()=>{t.value=l()}),P(()=>{r.value=c()});function l(){return e.width||e.modelValue.w}function c(){return e.height||e.modelValue.h}async function m(f,o,i){if(e.width&&e.height||e.modelValue.w&&e.modelValue.h)return;if(!a.value)return[0,0];f&&await document.fonts.ready;const{width:y,height:x}=window.getComputedStyle(a.value.$el);t.value=Math.max(Math.ceil(parseFloat(y)),o),r.value=Math.max(Math.ceil(parseFloat(x)),i)}return{width:t,height:r,syncSize:m}}function Oe(e){const a=C(e.modelValue);P(()=>{a.value=e.modelValue});const t=z(()=>{var s;return(e.width-c.value[0]*(r.value-1)-(((s=f.value)==null?void 0:s[0])||c.value[0])*2)/e.cols}),r=z(()=>e.cols),l=z(()=>e.rowHeight),c=z(()=>e.margin),m=z(()=>e.maxRows),f=z(()=>e.containerPadding),o=z(()=>e.minW),i=z(()=>e.minH);function y(s){return a.value.find(n=>n.i===s)}function x(){return a.value}function p(s,n,u,h,b,_){if(n.static||n.y===h&&n.x===u)return s;U(`Moving element ${n.i} to [${String(u)},${String(h)}] from [${n.x},${n.y}]`);const R=n.x,V=n.y;typeof u=="number"&&(n.x=u),typeof h=="number"&&(n.y=h),n.moved=!0;const A=H(s).filter(W=>w(W,n));return A.length>0&&_?(n.x=R,n.y=V,n.moved=!1,s):(A.forEach(W=>{U(`Resolving collision between ${n.i} at [${n.x},${n.y}] and ${W.i} at [${W.x},${W.y}]`,W.moved,W.i),!W.moved&&(W.static?s=v(s,W,n,b):s=v(s,n,W,b))}),s)}function v(s,n,u,h){const b=n.static;if(h){h=!1;const _={x:u.x,y:Math.max(n.y-u.h,0),w:u.w,h:u.h,i:"-1"};if(!$(s,_))return U(`Doing reverse collision on ${u.i} up to [${_.x},${_.y}].`),p(s,u,void 0,_.y,h,b)}return p(s,u,void 0,u.y+1,h,b)}function d(s,n,u){const b=p(a.value,s,n,u,!0,!e.collision);return a.value=g(b),a.value}function N(s,n,u){let h=!1;if(!e.collision){const b=a.value.filter(_=>w(_,{...s,w:n,h:u}));if(h=b.length>0,h){let _=1/0,R=1/0;b.forEach(V=>{V.x>s.x&&(_=Math.min(V.x,_)),V.y>s.y&&(R=Math.min(V.y,R))}),Number.isFinite(_)&&(s.w=_-s.x),Number.isFinite(R)&&(s.h=R-s.y)}}h||(s.w=n,s.h=u),a.value=g([...a.value])}function H(s){return s.slice(0).sort((n,u)=>n.y>u.y||n.y===u.y&&n.x>u.x?1:n.y===u.y&&n.x===u.x?0:-1)}function w(s,n){return s.i===n.i||s.x+s.w<=n.x||s.x>=n.x+n.w||s.y+s.h<=n.y?!1:!(s.y>=n.y+n.h)}function $(s,n){for(let u=0;u<s.length;++u)if(w(s[u],n))return s[u]}function g(s){const n=s.filter(b=>b.static),u=H(s),h=new Array(s.length);return u.forEach((b,_)=>{let R=JSON.parse(JSON.stringify(b));R.static||(R=F(n,R,u),n.push(R)),h[s.indexOf(u[_])]=R,R.moved=!1}),h}function F(s,n,u){if(e.collision)for(n.y=Math.min(k(s),n.y);n.y>0&&!$(s,n);)--n.y;let h;for(;(h=$(s,n))&&e.collision;)S(u,n,h.y+h.h,"y");return n}function k(s){let n=0;return s.forEach(u=>{const h=u.y+u.h;h>n&&(n=h)}),n}function M(){var n;if(!e.autoHeight)return;const s=k(a.value);return`${s*e.rowHeight+c.value[1]*(s-1)+(((n=f.value)==null?void 0:n[1])||c.value[1])*2}px`}const E={x:"w",y:"h"};function S(s,n,u,h){const b=E[h];n[h]+=1;const _=s.findIndex(R=>R===n);for(let R=_+1;R<s.length;++R){const V=s[R];if(V.y>n.y+n.h)break;w(n,V)&&S(s,V,u+n[b],h)}n[h]=u}return{cellWidth:t,cols:r,rowHeight:l,margin:c,maxRows:m,containerPadding:f,minW:o,minH:i,calContainerHeight:M,moveTo:d,resizeTo:N,getItem:y,getFull:x}}function Te(e,a){const{cellWidth:t,margin:r,rowHeight:l,cols:c,maxRows:m,containerPadding:f}=a,o=D(),i=D(),y=z(()=>f.value||r.value),x=z(()=>o.value?Math.round(o.value.x):Math.round(e.x*(t.value+r.value[0])+y.value[0])),p=z(()=>o.value?Math.round(o.value.y):Math.round(e.y*(l.value+r.value[1])+y.value[1])),v=z(()=>i.value?Math.round(i.value.width):Math.round(t.value*e.width+Math.max(0,e.width-1)*r.value[0])),d=z(()=>i.value?Math.round(i.value.height):Math.round(l.value*e.height+Math.max(0,e.height-1)*r.value[1])),N=z(()=>{const n=a.minW.value;return Math.round(t.value*n+Math.max(0,n-1)*r.value[0])}),H=z(()=>{const n=a.minH.value;return Math.round(l.value*n+Math.max(0,n-1)*r.value[1])}),w=z(()=>({position:"absolute",width:`${v.value}px`,height:`${d.value}px`,transform:`translate(${x.value}px, ${p.value}px)`})),$=(n,{node:u})=>{const h=u.offsetParent.getBoundingClientRect(),b=u.getBoundingClientRect();o.value={x:b.left-h.left+u.offsetParent.scrollLeft,y:b.top-h.top+u.offsetParent.scrollTop}},g=(n,u)=>{if(!o.value)throw new Error("onDrag called before onDragStart");const{deltaX:h,deltaY:b}=u,_=o.value.x+h,R=o.value.y+b;o.value={x:_,y:R};const{x:V,y:j}=S(_,R);e.dragFn(n,{x:V,y:j})},F=n=>{if(!o.value)throw new Error("onDragStop called before onDratStart");const{x:u,y:h}=o.value,{x:b,y:_}=S(u,h);o.value=void 0,e.dragEndFn(n,{x:b,y:_})},k=(n,{width:u,height:h})=>{i.value={width:u,height:h}},M=(n,u)=>{const{width:h,height:b}=u,{w:_,h:R}=s(h,b);i.value={width:h,height:b},e.resizeFn(n,{w:_,h:R})},E=(n,u)=>{i.value=void 0;const{width:h,height:b}=u,{w:_,h:R}=s(h,b);e.resizeStopFn(n,{w:_,h:R})};function S(n,u){let h=Math.round((n-r.value[0])/(t.value+r.value[0])),b=Math.round((u-r.value[1])/(l.value+r.value[1]));return h=X(h,0,c.value-e.width),b=X(b,0,m.value-e.height),{x:h,y:b}}function s(n,u){let h=Math.round((n+r.value[0])/(t.value+r.value[0])),b=Math.round((u+r.value[1])/(l.value+r.value[1]));return h=X(h,0,c.value-e.x),b=X(b,0,m.value-e.y),{w:h,h:b}}return{x,y:p,width:v,height:d,dragging:o,resizing:i,style:w,minWidth:N,minHeight:H,onDragStart:$,onDrag:g,onDragStop:F,onResizeStart:k,onResize:M,onResizeStop:E}}function K(){}const je={userSelectHack:{type:Boolean,default:!0},startFn:{type:Function,default:K},stopFn:{type:Function,default:K},dragFn:{type:Function,default:K},disabled:Boolean},ae=Y({name:"FreeDomCore",props:je,setup(e){const{only:a}=J(),t=D(!1),r=D(),l=z(()=>{var g;return((g=r.value)==null?void 0:g.$el)||r.value}),c=z(()=>{var g;return(g=l.value)==null?void 0:g.ownerDocument}),{lastX:m,lastY:f,create:o}=Le(l);let i,y;De(()=>{c.value&&(e.userSelectHack&&d(c.value),c.value.removeEventListener("mousemove",w),c.value.removeEventListener("mouseup",H))});function x(g){return N(g)}function p(g){H(g)}function v(g){if(g){if(!g.getElementById("free-dom-style-el")){const F=g.createElement("style");F.id="free-dom-style-el",F.innerHTML=".free-dom-transparent-selection *::selection {all: inherit;}",g.getElementsByTagName("head")[0].appendChild(F)}g.body&&g.body.classList.add("free-dom-transparent-selection")}}function d(g){if(!g)return;g.body&&g.body.classList.remove("free-dom-transparent-selection");const F=g.getSelection();F&&F.removeAllRanges()}function N(g){var E,S;if(e.disabled||!g.target||!(g.target instanceof l.value.ownerDocument.defaultView.Node))return;const{x:F,y:k}=$(g),M=o(F,k);e.startFn(g,M),m.value=F,f.value=k,t.value=!0,e.userSelectHack&&v(c.value),(E=c.value)==null||E.addEventListener("mousemove",w),(S=c.value)==null||S.addEventListener("mouseup",H)}function H(g){var E,S;if(!t.value)return;const{x:F,y:k}=$(g),M=o(F,k);e.stopFn(g,M),e.userSelectHack&&d(c.value),t.value=!1,m.value=NaN,f.value=NaN,(E=c.value)==null||E.removeEventListener("mousemove",w),(S=c.value)==null||S.removeEventListener("mouseup",H)}function w(g){const{x:F,y:k}=$(g),M=o(F,k);e.dragFn(g,M),m.value=F,f.value=k}function $(g){var S;const F=((S=l.value)==null?void 0:S.offsetParent)||c.value.body,k=F===F.ownerDocument.body;(!i||i!==F)&&(i=F,y=k?{left:0,top:0}:F.getBoundingClientRect());const M=g.clientX+F.scrollLeft-y.left,E=g.clientY+F.scrollTop-y.top;return{x:M,y:E}}return{only:a,domRef:r,mousedownFn:x,mouseupFn:p}},render(){return this.only?B(this.only,{ref:"domRef",onMousedown:Ne(this.mousedownFn,["stop"]),onMouseup:this.mouseupFn}):null}}),Ge=["t","r","l","b","lt","lb","rt","rb"];function Q(){}const T={dragOpts:{type:Object,default:()=>({})},width:{type:Number,default:0},height:{type:Number,default:0},scale:{type:[Boolean,Array],default:void 0},startFn:{type:Function,default:Q},stopFn:{type:Function,default:Q},resizeFn:{type:Function,default:Q},minWidth:{type:Number,default:50},minHeight:{type:Number,default:50},lockAspectRatio:Boolean},ce=Y({name:"ResizeDomCore",props:T,setup(e,{slots:a}){const{slots:t}=J(),r=z(()=>{const o=e.scale;return Array.isArray(o)?o:Ge}),l=C();function c(o,i){const{lockAspectRatio:y}=e;if(!e.minHeight&&!e.minWidth&&!y)return[o,i];if(y){const x=e.width/e.height,p=o-e.width,v=i-e.height;Math.abs(p)>Math.abs(v*x)?i=o/x:o=i*x}return o=Math.max(o,e.minWidth),i=Math.max(i,e.minHeight),[o,i]}function m(o,i){return(y,{node:x,deltaX:p,deltaY:v})=>{o==="start"&&(l.value=void 0);const d=i!=="t"&&i!=="b",N=i!=="l"&&i!=="r",H=i[0],w=i[i.length-1],$=x.getBoundingClientRect();l.value=$,H==="l"&&(p=-p),w==="t"&&(v=-v);let g=e.width+(d?p:0),F=e.height+(N?v:0);[g,F]=c(g,F);const k=g!==e.width||F!==e.height,M=`${o}Fn`,E=typeof e[M]=="function"?e[M]:null;E&&!(o==="resize"&&!k)&&E(y,{node:x,width:g,height:F,handle:i}),o==="stop"&&(l.value=void 0)}}function f(o){return a.handler?()=>{var i;return(i=a.handler)==null?void 0:i.call(a,o)}:()=>B("i",{class:["vv-resize-dom--handler",`vv-resize-dom--handler__${o}`]})}return{dots:r,children:t,handleResize:m,renderResizehandler:f}},render(){var e;return B("div",{class:"vv-resize-dom--box"},[(e=this.children)==null?void 0:e.map(a=>B(a)),this.dots.map(a=>B(ae,{class:[this.dragOpts.disabled&&"vv-resize-dom--disabled"],...this.dragOpts,stopFn:this.handleResize("stop",a),startFn:this.handleResize("start",a),dragFn:this.handleResize("resize",a)},this.renderResizehandler(a)))])}});function I(){}const L={modelValue:{type:Object,default:()=>({})},x:{type:Number,default:0},y:{type:Number,default:0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},lockAspectRatio:Boolean,dragStartFn:{type:Function,default:I},dragStopFn:{type:Function,default:I},dargFn:{type:Function,default:I},resizeStartFn:{type:Function,default:I},resizeFn:{type:Function,default:I},resizeStopFn:{type:Function,default:I},autoSize:{type:Boolean,default:!0},minWidth:T.minWidth,minHeight:T.minHeight,disabledDrag:Boolean,disabledResize:Boolean,scale:T.scale,fixNonMonospaced:Boolean},qe=Y({name:"FreeDom",props:L,emits:["update:width","update:height","update:x","update:y","update:modelValue"],setup(e,{emit:a,expose:t,slots:r}){const l=D(),{slots:c}=J(),{x:m,y:f,deltaX:o,deltaY:i,create:y,handleDrag:x,handleDragStop:p}=Xe(e),{width:v,height:d,syncSize:N}=Ie(e,l),H={_rect:te({x:m,y:f,width:v,height:d,deltaX:o,deltaY:i}),trigger:()=>{}},w=Pe(H,e),$=()=>{N(w.fixNonMonospaced.value,w.minWidth.value,w.minHeight.value)};q(()=>{e.autoSize&&$()});const g=z(()=>({position:"absolute",width:`${v.value}px`,height:`${d.value}px`,transform:`translate(${m.value}px, ${f.value}px)`})),F=(s,n)=>{var _;const u=y(n),h={x:u.x,y:u.y,width:v.value,height:d.value};(_=w.check)!=null&&_.call(w,h)&&(x(s,u),w.emit("move"))},k=(s,n)=>{var b;const u={x:m.value,y:f.value,width:v.value,height:d.value};((b=w.check)==null?void 0:b.call(w,u))||(m.value=X(m.value,0,w.width),f.value=X(f.value,0,w.height)),p(s,n),w.emit("moveup"),a("update:x",m.value),a("update:y",f.value),a("update:modelValue",{x:m.value,y:f.value,w:v.value,h:d.value})},M=(s,{node:n,width:u,height:h,handle:b})=>{var oe;const _=-(u-v.value),R=-(h-d.value),V=b[0],j=b[b.length-1];let A=m.value,G=f.value;V==="l"&&(A+=_),j==="t"&&(G+=R),(oe=w.check)!=null&&oe.call(w,{x:A,y:G,width:u,height:h})&&(v.value=u,d.value=h,m.value=A,f.value=G,e.resizeFn(s,{node:n,width:u,height:h,handle:b}),w==null||w.emit("move"))},E=()=>{var n;((n=w.check)==null?void 0:n.call(w,{x:m.value,y:f.value,width:v.value,height:d.value}))||(m.value=X(m.value,0,w.width),f.value=X(f.value,0,w.height)),a("update:width",v.value),a("update:height",d.value),a("update:modelValue",{x:m.value,y:f.value,w:v.value,h:d.value}),w.emit("moveup")},S=()=>B(ce,{width:v.value,height:d.value,lockAspectRatio:w.lockAspectRatio.value,dragOpts:{disabled:w.disabledResize.value},resizeFn:M,stopFn:E,minHeight:w.minHeight.value,minWidth:w.minWidth.value,scale:w.scale.value},{default:()=>c.value,handler:r.handler});return t({syncSize:$}),{domRef:l,style:g,onDragStop:k,onDrag:F,resizeNode:S,disabled:w.disabledDrag}},render(){return B(ae,{ref:"domRef",class:"vv-free-dom--draggable",style:this.style,stopFn:this.onDragStop,dragFn:this.onDrag,disabled:this.disabled},()=>this.resizeNode())}}),Ce={width:{type:Number,default:void 0},height:{type:Number,default:void 0},diff:{type:Number,default:2},showLine:{type:Boolean,default:!0},minWidth:L.minWidth,minHeight:L.minHeight,lockAspectRatio:L.lockAspectRatio,disabledDrag:L.disabledDrag,disabledResize:L.disabledResize,scale:L.scale,fixNonMonospaced:L.fixNonMonospaced},Je=Y({name:"FreeDomWrap",props:Ce,setup(e){const a=Ae(),t=C(),r=D([]),l=D(e.width),c=D(e.height);P(()=>{l.value=e.width}),P(()=>{c.value=e.height}),q(()=>{var i;if(!e.width||!e.height){t.value||console.warn("[free-dom] cannot find element, width or height may be set to 0");const{width:y,height:x}=((i=t.value)==null?void 0:i.getBoundingClientRect())||{};e.width||(l.value=y||0),e.height||(c.value=x||0)}});function m(i,y){r.value.push({uuid:i,node:y})}function f(i){const{x:y,y:x,width:p,height:v}=i;return y>=0&&y+p<=l.value&&x>=0&&x+v<=c.value}de(ne,te({...ke(e),nodes:r,width:l,height:c,register:m,checkValid:f,on:a.on,off:a.off,emit:a.emit}));const o=z(()=>({width:`${e.width}px`,height:`${e.height}px`}));return{rectRef:t,style:o}},render(){const e=typeof this.$slots.default=="function"?this.$slots.default():this.$slots.default;return B("section",{ref:"rectRef",class:"vv-free-dom--scene",style:this.style},[e,B(We,{showLine:this.showLine})])}}),he=Symbol("gridLayoutContext"),O=()=>{},Ue={x:{type:Number,required:!0},y:{type:Number,required:!0},width:{type:Number,required:!0},height:{type:Number,required:!0},dragStartFn:{type:Function,default:O},dragFn:{type:Function,default:O},dragEndFn:{type:Function,default:O},resizeStartFn:{type:Function,default:O},resizeFn:{type:Function,default:O},resizeStopFn:{type:Function,default:O},isDraggable:Boolean,isResizable:Boolean,scale:{type:T.scale.type,default:()=>["rb"]}},Ke=["dragMove"],re=Y({name:"GridItem",props:Ue,emits:Ke,setup(e){const a=ee(he);if(!a)throw new Error("TODO");const{x:t,y:r,width:l,height:c,dragging:m,style:f,minWidth:o,minHeight:i,onDragStart:y,onDrag:x,onDragStop:p,onResizeStart:v,onResize:d,onResizeStop:N}=Te(e,a),{only:H,slots:w}=J(),$=F=>B(ce,{width:l.value,height:c.value,scale:e.scale,dragOpts:{disabled:!e.isResizable},minWidth:o.value,minHeight:i.value,startFn:v,resizeFn:d,stopFn:N},()=>F);return{x:t,y:r,width:l,height:c,child:H,slots:w,style:f,dragging:m,onDragStart:y,onDrag:x,onDragStop:p,onResizeStart:v,onResize:d,onResizeStop:N,dragNode:F=>B(ae,{class:[m.value&&"vv-grid-layout--item__draggable","vv-grid-layout--item",!e.isDraggable&&"vv-grid-layout--item__disabled"],style:f.value,disabled:!e.isDraggable,startFn:y,stopFn:p,dragFn:x},()=>$(F))}},render(){const e=this.slots;return this.dragNode(e)}}),Qe={style:{type:Object,default:()=>({})},modelValue:{type:Array,required:!0,default:()=>[]},autoHeight:{type:Boolean,default:!0},cols:{type:Number,default:12},maxRows:{type:Number,default:1/0},minW:{type:Number,default:1},minH:{type:Number,default:1},rowHeight:{type:Number,default:150},width:{type:Number,default:1200},margin:{type:Array,default:()=>[10,10]},containerPadding:{type:Array,default:void 0},disabledDrag:Boolean,disabledResize:Boolean,collision:Boolean},Ze=Y({name:"GridLayout",props:Qe,emits:["update:modelValue"],setup(e,{emit:a}){const t=Oe(e);de(he,t);const r=D(null);function l(m){const f=m.key;if(!f)return;const o=t.getItem(String(f));if(!o)return;const i=!o.static&&!e.disabledDrag,y=!o.static&&!e.disabledResize;return B(re,{x:o.x,y:o.y,width:o.w,height:o.h,isDraggable:i,isResizable:y,scale:o.scale,dragEndFn:(x,p)=>{const{x:v,y:d}=p,N=t.moveTo(o,v,d);a("update:modelValue",N),r.value=null},dragStartFn:()=>{},dragFn:(x,p)=>{if(!o)return;const v={x:o.x,y:o.y,width:o.w,height:o.h},{x:d,y:N}=p;t.moveTo(o,d,N),r.value=v},resizeFn:(x,p)=>{const v={x:o.x,y:o.y,width:o.w,height:o.h};r.value=v;const{w:d,h:N}=p;t.resizeTo(o,d,N)},resizeStopFn:(x,p)=>{const{w:v,h:d}=p;t.resizeTo(o,v,d),r.value=null}},()=>m)}function c(){if(!r.value)return null;const{x:m,y:f,width:o,height:i}=r.value;return B(re,{class:"vv-grid-layout--placeholder",x:m,y:f,width:o,height:i,move:!1})}return{processItem:l,placeholder:c,layout:t}},render(){const e={...this.style||{},height:this.layout.calContainerHeight()},a=typeof this.$slots.default=="function"?this.$slots.default():this.$slots.default||[];return B("div",{class:"vv-grid-layout",style:e},[a.map(this.processItem),this.placeholder()])}}),nt=Je,at=Ze,ot=qe;export{ot as F,at as G,tt as _,nt as a};
