import{u as ve}from"./index.df365b42.js";import{h as D,j as q,a2 as ue,d as Y,g as R,E as me,o as le,c as ge,k as ye,J as we,w as be,b as pe,L as Fe,R as xe,l as de,e as ze,r as _e,F as Re,a3 as T,Q as te,H as J,a4 as ne,a1 as De,A as I,D as Ne,X as ce,a5 as Se}from"./framework.28cd1f07.js";function ke(e){const a=D(1200);q(()=>{d(),window.addEventListener("resize",t)}),ue(()=>{window.removeEventListener("resize",t)});const t=ve(d);function d(){var i;a.value=((i=e.value)==null?void 0:i.getBoundingClientRect().width)||1200}return a}const Qe=Y({__name:"vp-demo",props:{source:{},demos:{},path:{}},setup(e){const a=e,t=D(),d=ke(t),i=R(()=>a.path.startsWith("grid-layout")),l=R(()=>({border:"1px solid black",width:i.value?"":"100%",height:i.value?"":"300px"})),g=R(()=>{const F=Object.keys(a.demos);for(const o of F)if(o.replace("../examples/","").replace(".vue","")===a.path)return a.demos[o].default;return!1});return(F,o)=>{const s=me("ClientOnly");return le(),ge(Re,null,[ye("section",{ref_key:"wrapRef",ref:t,style:{width:"100%"}},[we(s,null,{default:be(()=>[g.value?(le(),pe(Fe(g.value),{key:0,style:xe(l.value),width:de(d)},null,8,["style","width"])):ze("",!0)]),_:1})],512),_e(F.$slots,"source")],64)}}});const ae=Symbol("Scene");function V(e,a={},t={},d={}){if(!e)return()=>null;const i={...a,...t};return l=>T(e,i,l)}function X(e,a,t=1/0){return Math.max(Math.min(e,t),a)}function Q(...e){}const He=["xt","xc","xb","yl","yc","yr"],Me=Y({props:{showLine:Boolean},setup(){const e=te(ae),a=J(He),t=D(e.diff),d=e.nodes,i=ne({xt:{show:!1,pos:0},xc:{show:!1,pos:0},xb:{show:!1,pos:0},yl:{show:!1,pos:0},yc:{show:!1,pos:0},yr:{show:!1,pos:0}}),l=s=>{var p;const v=((p=d.find(x=>x.uuid===s))==null?void 0:p.node)??{};g(),d.forEach(x=>{if(x.uuid===s)return;const f=F(v._rect),c=F(x.node._rect);o(f.top,c.top)&&(i.xt={show:!0,pos:c.top},v._rect.y=c.top),o(f.bottom,c.top)&&(i.xt={show:!0,pos:c.top},v._rect.y=c.top-f.height),o(f.centerY,c.centerY)&&(i.xc={show:!0,pos:c.centerY},v._rect.y=c.centerY-f.height/2),o(f.top,c.bottom)&&(i.xb={show:!0,pos:c.bottom},v._rect.y=c.bottom),o(f.bottom,c.bottom)&&(i.xb={show:!0,pos:c.bottom},v._rect.y=c.bottom-f.height),o(f.left,c.left)&&(i.yl={show:!0,pos:c.left},v._rect.x=c.left),o(f.right,c.left)&&(i.yl={show:!0,pos:c.left},v._rect.x=c.left-f.width),o(f.centerX,c.centerX)&&(i.yc={show:!0,pos:c.centerX},v._rect.x=c.centerX-f.width/2),o(f.left,c.right)&&(i.yr={show:!0,pos:c.right},v._rect.x=c.right),o(f.right,c.right)&&(i.yr={show:!0,pos:c.right},v._rect.x=c.right-f.width)})};e==null||e.on("move",l),e==null||e.on("moveup",g),ue(()=>{e==null||e.off("move"),e==null||e.off("moveup")});function g(){i.xt.show=!1,i.xc.show=!1,i.xb.show=!1,i.yl.show=!1,i.yc.show=!1,i.yr.show=!1}function F(s){return{deltaX:s.deltaX,deltaY:s.deltaY,top:s.y,bottom:s.y+s.height,left:s.x,right:s.x+s.width,width:s.width,height:s.height,centerX:s.x+s.width/2,centerY:s.y+s.height/2}}function o(s,v){return Math.abs(s-v)<=t.value}return{lines:a,diff:t,lineStatus:i}},render(){const e=(t,d)=>T("div",{style:{[t.includes("x")?"top":"left"]:d.pos+"px"},class:[t.includes("x")?"vv-free-dom--xline":"vv-free-dom--yline","vv-free-dom--line"]}),a=this.showLine?this.lines.filter(t=>this.lineStatus[t].show).map(t=>e(t,this.lineStatus[t])):[];return T("div",{class:"vv-free-dom--markline"},a)}});function C(){const e=De(),a=R(()=>typeof e.default=="function"?e.default():e.default),t=R(()=>{var d;return(d=a.value)==null?void 0:d[0]});return{slots:a,only:t}}function $e(e){const a=D(NaN),t=D(NaN);function d(i,l){const g=isNaN(a.value),F=de(e);if(!F)throw new Error("drag node does not exist");return g?{node:F,deltaX:0,deltaY:0,lastX:i,lastY:l,x:i,y:l}:{node:F,deltaX:i-a.value,deltaY:l-t.value,lastX:a.value,lastY:t.value,x:i,y:l}}return{lastX:a,lastY:t,create:d}}function Ee(e){const a=D(e.x||e.modelValue.x||0),t=D(e.y||e.modelValue.y||0),d=D(0),i=D(0),l=D();I(()=>{a.value=e.x||e.modelValue.x||0}),I(()=>{t.value=e.y||e.modelValue.y||0});const g=(v,p)=>{e.dragStartFn(v,p)},F=(v,p)=>{a.value=p.x,t.value=p.y,d.value=p.deltaX,i.value=p.deltaY,e.dragFn(v,p)},o=(v,p)=>{const x=l.value=s(p);e.dragStopFn(v,x)};function s(v){return{node:v.node,x:a.value+v.deltaX,y:t.value+v.deltaY,deltaX:v.deltaX,deltaY:v.deltaY,lastX:a.value,lastY:t.value}}return{x:a,y:t,deltaX:d,deltaY:i,create:s,handleDragStart:g,handleDrag:F,handleDragStop:o}}let Be=0;function We(e,a){const t=te(ae,void 0),d=Be++,i=R(()=>(t==null?void 0:t.handle)||a.handle),l=R(()=>(t==null?void 0:t.lockAspectRatio)||a.lockAspectRatio),g=R(()=>(t==null?void 0:t.minWidth)||a.minWidth),F=R(()=>(t==null?void 0:t.minHeight)||a.minHeight),o=R(()=>(t==null?void 0:t.disabledDrag)||a.disabledDrag),s=R(()=>(t==null?void 0:t.disabledResize)||a.disabledResize),v=R(()=>(t==null?void 0:t.scale)||a.scale),p=R(()=>(t==null?void 0:t.fixNonMonospaced)||a.fixNonMonospaced);q(()=>{t==null||t.register(d,e)});function x(f){return t?t.checkValid(f):!0}return{emit:f=>t==null?void 0:t.emit(f,d),check:x,width:t==null?void 0:t.width,height:t==null?void 0:t.height,scale:v,handle:i,lockAspectRatio:l,minWidth:g,minHeight:F,disabledDrag:o,disabledResize:s,fixNonMonospaced:p}}function Ve(){const e=D({});return{on:(i,l)=>{e.value[i]?e.value[i].push(l):e.value[i]=[l]},off:i=>{e.value[i].length=0},emit:(i,l)=>{(e.value[i]||[]).forEach(F=>F(l))}}}function Le(e,a){const t=D(i()),d=D(l());I(()=>{t.value=i()}),I(()=>{d.value=l()});function i(){return e.width||e.modelValue.w}function l(){return e.height||e.modelValue.h}async function g(F,o,s){if(e.width&&e.height||e.modelValue.w&&e.modelValue.h)return;if(!a.value)return[0,0];F&&await document.fonts.ready;const{width:v,height:p}=window.getComputedStyle(a.value.$el);t.value=Math.max(Math.ceil(parseFloat(v)),o),d.value=Math.max(Math.ceil(parseFloat(p)),s)}return{width:t,height:d,syncSize:g}}function Xe(e){const a=J(e.modelValue);I(()=>{a.value=e.modelValue});const t=R(()=>{var r;return(e.width-l.value[0]*(d.value-1)-(((r=F.value)==null?void 0:r[0])||l.value[0])*2)/e.cols}),d=R(()=>e.cols),i=R(()=>e.rowHeight),l=R(()=>e.margin),g=R(()=>e.maxRows),F=R(()=>e.containerPadding),o=R(()=>e.minW),s=R(()=>e.minH);function v(r){return a.value.find(n=>n.i===r)}function p(){return a.value}function x(r,n,h,u,y,b){if(n.static||n.y===u&&n.x===h)return r;Q(`Moving element ${n.i} to [${String(h)},${String(u)}] from [${n.x},${n.y}]`);const _=n.x,k=n.y;typeof h=="number"&&(n.x=h),typeof u=="number"&&(n.y=u),n.moved=!0;const j=S(r).filter(W=>w(W,n));return j.length>0&&b?(n.x=_,n.y=k,n.moved=!1,r):(j.forEach(W=>{Q(`Resolving collision between ${n.i} at [${n.x},${n.y}] and ${W.i} at [${W.x},${W.y}]`,W.moved,W.i),!W.moved&&(W.static?r=f(r,W,n,y):r=f(r,n,W,y))}),r)}function f(r,n,h,u){const y=n.static;if(u){u=!1;const b={x:h.x,y:Math.max(n.y-h.h,0),w:h.w,h:h.h,i:"-1"};if(!E(r,b))return Q(`Doing reverse collision on ${h.i} up to [${b.x},${b.y}].`),x(r,h,void 0,b.y,u,y)}return x(r,h,void 0,h.y+1,u,y)}function c(r,n,h){const y=x(a.value,r,n,h,!0,!e.collision);return a.value=m(y),a.value}function H(r,n,h){let u=!1;if(!e.collision){const y=a.value.filter(b=>w(b,{...r,w:n,h}));if(u=y.length>0,u){let b=1/0,_=1/0;y.forEach(k=>{k.x>r.x&&(b=Math.min(k.x,b)),k.y>r.y&&(_=Math.min(k.y,_))}),Number.isFinite(b)&&(r.w=b-r.x),Number.isFinite(_)&&(r.h=_-r.y)}}u||(r.w=n,r.h=h),a.value=m([...a.value])}function S(r){return r.slice(0).sort((n,h)=>n.y>h.y||n.y===h.y&&n.x>h.x?1:n.y===h.y&&n.x===h.x?0:-1)}function w(r,n){return r.i===n.i||r.x+r.w<=n.x||r.x>=n.x+n.w||r.y+r.h<=n.y?!1:!(r.y>=n.y+n.h)}function E(r,n){for(let h=0;h<r.length;++h)if(w(r[h],n))return r[h]}function m(r){const n=r.filter(y=>y.static),h=S(r),u=new Array(r.length);return h.forEach((y,b)=>{let _=JSON.parse(JSON.stringify(y));_.static||(_=z(n,_,h),n.push(_)),u[r.indexOf(h[b])]=_,_.moved=!1}),u}function z(r,n,h){if(e.collision)for(n.y=Math.min(N(r),n.y);n.y>0&&!E(r,n);)--n.y;let u;for(;(u=E(r,n))&&e.collision;)$(h,n,u.y+u.h,"y");return n}function N(r){let n=0;return r.forEach(h=>{const u=h.y+h.h;u>n&&(n=u)}),n}function M(){var n;if(!e.autoHeight)return;const r=N(a.value);return`${r*e.rowHeight+l.value[1]*(r-1)+(((n=F.value)==null?void 0:n[1])||l.value[1])*2}px`}const B={x:"w",y:"h"};function $(r,n,h,u){const y=B[u];n[u]+=1;const b=r.findIndex(_=>_===n);for(let _=b+1;_<r.length;++_){const k=r[_];if(k.y>n.y+n.h)break;w(n,k)&&$(r,k,h+n[y],u)}n[u]=h}return{cellWidth:t,cols:d,rowHeight:i,margin:l,maxRows:g,containerPadding:F,minW:o,minH:s,calContainerHeight:M,moveTo:c,resizeTo:H,getItem:v,getFull:p}}function Ye(e,a){const{cellWidth:t,margin:d,rowHeight:i,cols:l,maxRows:g,containerPadding:F}=a,o=D(),s=D(),v=R(()=>F.value||d.value),p=R(()=>o.value?Math.round(o.value.x):Math.round(e.x*(t.value+d.value[0])+v.value[0])),x=R(()=>o.value?Math.round(o.value.y):Math.round(e.y*(i.value+d.value[1])+v.value[1])),f=R(()=>s.value?Math.round(s.value.width):Math.round(t.value*e.width+Math.max(0,e.width-1)*d.value[0])),c=R(()=>s.value?Math.round(s.value.height):Math.round(i.value*e.height+Math.max(0,e.height-1)*d.value[1])),H=R(()=>{const n=a.minW.value;return Math.round(t.value*n+Math.max(0,n-1)*d.value[0])}),S=R(()=>{const n=a.minH.value;return Math.round(i.value*n+Math.max(0,n-1)*d.value[1])}),w=R(()=>({position:"absolute",width:`${f.value}px`,height:`${c.value}px`,transform:`translate(${p.value}px, ${x.value}px)`})),E=(n,{node:h})=>{const u=h.offsetParent.getBoundingClientRect(),y=h.getBoundingClientRect();o.value={x:y.left-u.left+h.offsetParent.scrollLeft,y:y.top-u.top+h.offsetParent.scrollTop}},m=(n,h)=>{if(!o.value)throw new Error("onDrag called before onDragStart");const{deltaX:u,deltaY:y}=h,b=o.value.x+u,_=o.value.y+y;o.value={x:b,y:_};const{x:k,y:P}=$(b,_);e.dragFn(n,{x:k,y:P})},z=n=>{if(!o.value)throw new Error("onDragStop called before onDratStart");const{x:h,y:u}=o.value,{x:y,y:b}=$(h,u);o.value=void 0,e.dragEndFn(n,{x:y,y:b})},N=(n,{width:h,height:u})=>{s.value={width:h,height:u}},M=(n,h)=>{const{width:u,height:y}=h,{w:b,h:_}=r(u,y);s.value={width:u,height:y},e.resizeFn(n,{w:b,h:_})},B=(n,h)=>{s.value=void 0;const{width:u,height:y}=h,{w:b,h:_}=r(u,y);e.resizeStopFn(n,{w:b,h:_})};function $(n,h){let u=Math.round((n-d.value[0])/(t.value+d.value[0])),y=Math.round((h-d.value[1])/(i.value+d.value[1]));return u=X(u,0,l.value-e.width),y=X(y,0,g.value-e.height),{x:u,y}}function r(n,h){let u=Math.round((n+d.value[0])/(t.value+d.value[0])),y=Math.round((h+d.value[1])/(i.value+d.value[1]));return u=X(u,0,l.value-e.x),y=X(y,0,g.value-e.y),{w:u,h:y}}return{x:p,y:x,width:f,height:c,dragging:o,resizing:s,style:w,minWidth:H,minHeight:S,onDragStart:E,onDrag:m,onDragStop:z,onResizeStart:N,onResize:M,onResizeStop:B}}function Z(){}const Pe={userSelectHack:{type:Boolean,default:!0},startFn:{type:Function,default:Z},stopFn:{type:Function,default:Z},dragFn:{type:Function,default:Z},disabled:Boolean},oe=Y({name:"FreeDomCore",props:Pe,setup(e){const{only:a}=C(),t=D(!1),d=D(),i=R(()=>{var m;return((m=d.value)==null?void 0:m.$el)||d.value}),l=R(()=>{var m;return(m=i.value)==null?void 0:m.ownerDocument}),{lastX:g,lastY:F,create:o}=$e(i);let s,v;Ne(()=>{l.value&&(e.userSelectHack&&c(l.value),l.value.removeEventListener("mousemove",w),l.value.removeEventListener("mouseup",S))});function p(m){return H(m)}function x(m){S(m)}function f(m){if(m){if(!m.getElementById("free-dom-style-el")){const z=m.createElement("style");z.id="free-dom-style-el",z.innerHTML=".free-dom-transparent-selection *::selection {all: inherit;}",m.getElementsByTagName("head")[0].appendChild(z)}m.body&&m.body.classList.add("free-dom-transparent-selection")}}function c(m){if(!m)return;m.body&&m.body.classList.remove("free-dom-transparent-selection");const z=m.getSelection();z&&z.removeAllRanges()}function H(m){var B,$;if(e.disabled||!m.target||!(m.target instanceof i.value.ownerDocument.defaultView.Node))return;const{x:z,y:N}=E(m),M=o(z,N);e.startFn(m,M),g.value=z,F.value=N,t.value=!0,e.userSelectHack&&f(l.value),(B=l.value)==null||B.addEventListener("mousemove",w),($=l.value)==null||$.addEventListener("mouseup",S)}function S(m){var B,$;if(!t.value)return;const{x:z,y:N}=E(m),M=o(z,N);e.stopFn(m,M),e.userSelectHack&&c(l.value),t.value=!1,g.value=NaN,F.value=NaN,(B=l.value)==null||B.removeEventListener("mousemove",w),($=l.value)==null||$.removeEventListener("mouseup",S)}function w(m){const{x:z,y:N}=E(m),M=o(z,N);e.dragFn(m,M),g.value=z,F.value=N}function E(m){var $;const z=(($=i.value)==null?void 0:$.offsetParent)||l.value.body,N=z===z.ownerDocument.body;(!s||s!==z)&&(s=z,v=N?{left:0,top:0}:z.getBoundingClientRect());const M=m.clientX+z.scrollLeft-v.left,B=m.clientY+z.scrollTop-v.top;return{x:M,y:B}}return{only:a,coreRef:d,mousedownFn:p,mouseupFn:x}},render(){this.mouseupFn;const e={onMousedown:t=>{t.stopPropagation(),this.mousedownFn(t)},onMouseup:this.mouseupFn},a=V(this.only,{ref:t=>{this.coreRef=t}},e,{});return typeof a=="function"?a():a}}),Ie=["t","r","l","b","lt","lb","rt","rb"];function ee(){}const G={dragOpts:{type:Object,default:()=>({})},width:{type:Number,default:0},height:{type:Number,default:0},scale:{type:[Boolean,Array],default:void 0},startFn:{type:Function,default:ee},stopFn:{type:Function,default:ee},resizeFn:{type:Function,default:ee},minWidth:{type:Number,default:50},minHeight:{type:Number,default:50},lockAspectRatio:Boolean},he=Y({name:"ResizeDomCore",props:G,setup(e,{slots:a}){const{slots:t}=C(),d=R(()=>{const o=e.scale;return Array.isArray(o)?o:Ie}),i=J();function l(o,s){const{lockAspectRatio:v}=e;if(!e.minHeight&&!e.minWidth&&!v)return[o,s];if(v){const p=e.width/e.height,x=o-e.width,f=s-e.height;Math.abs(x)>Math.abs(f*p)?s=o/p:o=s*p}return o=Math.max(o,e.minWidth),s=Math.max(s,e.minHeight),[o,s]}function g(o,s){return(v,{node:p,deltaX:x,deltaY:f})=>{o==="start"&&(i.value=void 0);const c=s!=="t"&&s!=="b",H=s!=="l"&&s!=="r",S=s[0],w=s[s.length-1],E=p.getBoundingClientRect();i.value=E,S==="l"&&(x=-x),w==="t"&&(f=-f);let m=e.width+(c?x:0),z=e.height+(H?f:0);[m,z]=l(m,z);const N=m!==e.width||z!==e.height,M=`${o}Fn`,B=typeof e[M]=="function"?e[M]:null;B&&!(o==="resize"&&!N)&&B(v,{node:p,width:m,height:z,handle:s}),o==="stop"&&(i.value=void 0)}}function F(o){return a.handler?()=>{var s;return(s=a.handler)==null?void 0:s.call(a,o)}:()=>T("i",{class:["vv-resize-dom--handler",`vv-resize-dom--handler__${o}`]})}return{dots:d,children:t,handleResize:g,renderResizehandler:F}},render(){const e=[...this.children||[],this.dots.map(a=>V(oe,{class:[this.dragOpts.disabled&&"vv-resize-dom--disabled"]},{...this.dragOpts,stopFn:this.handleResize("stop",a),startFn:this.handleResize("start",a),dragFn:this.handleResize("resize",a)})(this.renderResizehandler(a)))];return V("div",{class:"vv-resize-dom--box"})(e)}});function A(){}const L={modelValue:{type:Object,default:()=>({})},x:{type:Number,default:0},y:{type:Number,default:0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},handle:{type:String,default:void 0},lockAspectRatio:Boolean,dragStartFn:{type:Function,default:A},dragStopFn:{type:Function,default:A},dragFn:{type:Function,default:A},resizeStartFn:{type:Function,default:A},resizeFn:{type:Function,default:A},resizeStopFn:{type:Function,default:A},autoSize:{type:Boolean,default:!0},minWidth:G.minWidth,minHeight:G.minHeight,disabledDrag:Boolean,disabledResize:Boolean,scale:G.scale,fixNonMonospaced:Boolean},Ae=Y({name:"FreeDom",props:L,emits:["update:width","update:height","update:x","update:y","update:modelValue"],setup(e,{emit:a,expose:t,slots:d}){const i=D(),{x:l,y:g,deltaX:F,deltaY:o,create:s,handleDragStart:v,handleDrag:p,handleDragStop:x}=Ee(e),{width:f,height:c,syncSize:H}=Le(e,i),S={_rect:ne({x:l,y:g,width:f,height:c,deltaX:F,deltaY:o}),trigger:()=>{}},w=We(S,e),E=()=>{H(w.fixNonMonospaced.value,w.minWidth.value,w.minHeight.value)},m=D(!1);q(()=>{e.autoSize&&E()});const z=R(()=>({position:"absolute",width:`${f.value}px`,height:`${c.value}px`,transform:`translate(${l.value}px, ${g.value}px)`})),N=(u,y)=>{var P;if(!m.value)return;const b=s(y),_={x:b.x,y:b.y,width:f.value,height:c.value};(P=w.check)!=null&&P.call(w,_)&&(p(u,b),w.emit("move"))},M=(u,y)=>{var k;if(!m.value)return;const b={x:l.value,y:g.value,width:f.value,height:c.value};((k=w.check)==null?void 0:k.call(w,b))||(l.value=X(l.value,0,w.width),g.value=X(g.value,0,w.height)),x(u,y),w.emit("moveup"),a("update:x",l.value),a("update:y",g.value),a("update:modelValue",{x:l.value,y:g.value,w:f.value,h:c.value})},B=(u,y)=>{const b=w.handle.value;b?b.startsWith(".")?m.value=u.target.classList.contains(b.slice(1)):b.startsWith("#")?m.value=u.target.id===b.slice(1):(console.warn(`[free-dom] can not find element with ${b}`),m.value=!0):m.value=!0,m.value&&v(u,y)},$=(u,{node:y,width:b,height:_,handle:k})=>{var se;const P=-(b-f.value),j=-(_-c.value),ie=k[0],W=k[k.length-1];let U=l.value,K=g.value;ie==="l"&&(U+=P),W==="t"&&(K+=j),(se=w.check)!=null&&se.call(w,{x:U,y:K,width:b,height:_})&&(f.value=b,c.value=_,l.value=U,g.value=K,e.resizeFn(u,{node:y,width:b,height:_,handle:k}),w==null||w.emit("move"))},r=(u,y)=>{var _;((_=w.check)==null?void 0:_.call(w,{x:l.value,y:g.value,width:f.value,height:c.value}))||(l.value=X(l.value,0,w.width),g.value=X(g.value,0,w.height)),e.resizeStopFn(u,y),a("update:width",f.value),a("update:height",c.value),a("update:modelValue",{x:l.value,y:g.value,w:f.value,h:c.value}),w.emit("moveup")},n=(u,y)=>{e.resizeStartFn(u,y)},h=()=>{const u={width:f.value,height:c.value,lockAspectRatio:w.lockAspectRatio.value,dragOpts:{disabled:w.disabledResize.value},startFn:n,resizeFn:$,stopFn:r,minHeight:w.minHeight.value,minWidth:w.minWidth.value,scale:w.scale.value};return V(he,{},u)(d)};return t==null||t({syncSize:E}),{domRef:i,style:z,onDragStop:M,onDrag:N,onDragStart:B,resizeNode:h,disabled:w.disabledDrag}},render(){var t;const e={startFn:this.onDragStart,stopFn:this.onDragStop,dragFn:this.onDrag,disabled:this.disabled},a=()=>this.resizeNode();return(t=V(oe,{ref:"domRef",class:"vv-free-dom--draggable",style:this.style},e))==null?void 0:t(a)}}),Oe={width:{type:Number,default:void 0},height:{type:Number,default:void 0},diff:{type:Number,default:2},showLine:{type:Boolean,default:!0},handle:L.handle,minWidth:L.minWidth,minHeight:L.minHeight,lockAspectRatio:L.lockAspectRatio,disabledDrag:L.disabledDrag,disabledResize:L.disabledResize,scale:L.scale,fixNonMonospaced:L.fixNonMonospaced},Ge=Y({name:"FreeDomWrap",props:Oe,setup(e){const{slots:a}=C(),t=Ve(),d=J(),i=D([]),l=D(e.width),g=D(e.height);I(()=>{l.value=e.width}),I(()=>{g.value=e.height}),q(()=>{var v;if(!e.width||!e.height){d.value||console.warn("[free-dom] cannot find element, width or height may be set to 0");const{width:p,height:x}=((v=d.value)==null?void 0:v.getBoundingClientRect())||{};e.width||(l.value=p||0),e.height||(g.value=x||0)}});function F(v,p){i.value.push({uuid:v,node:p})}function o(v){const{x:p,y:x,width:f,height:c}=v;return p>=0&&p+f<=l.value&&x>=0&&x+c<=g.value}ce(ae,ne({...Se(e),nodes:i,width:l,height:g,register:F,checkValid:o,on:t.on,off:t.off,emit:t.emit}));const s=R(()=>({width:`${e.width}px`,height:`${e.height}px`}));return{rectRef:d,style:s,slots:a}},render(){const e=V(Me,{},{showLine:this.showLine})(),a=[this.slots,e];return V("section",{ref:"rectRef",class:"vv-free-dom--scene",style:this.style})(a)}}),fe=Symbol("gridLayoutContext"),O=()=>{},Te={x:{type:Number,required:!0},y:{type:Number,required:!0},width:{type:Number,required:!0},height:{type:Number,required:!0},dragStartFn:{type:Function,default:O},dragFn:{type:Function,default:O},dragEndFn:{type:Function,default:O},resizeStartFn:{type:Function,default:O},resizeFn:{type:Function,default:O},resizeStopFn:{type:Function,default:O},isDraggable:Boolean,isResizable:Boolean,scale:{type:G.scale.type,default:()=>["rb"]}},je=["dragMove"],re=Y({name:"GridItem",props:Te,emits:je,setup(e){const a=te(fe);if(!a)throw new Error("TODO");const{x:t,y:d,width:i,height:l,dragging:g,style:F,minWidth:o,minHeight:s,onDragStart:v,onDrag:p,onDragStop:x,onResizeStart:f,onResize:c,onResizeStop:H}=Ye(e,a),{only:S,slots:w}=C(),E=z=>{const N={width:i.value,height:l.value,scale:e.scale,dragOpts:{disabled:!e.isResizable},minWidth:o.value,minHeight:s.value,startFn:f,resizeFn:c,stopFn:H};return V(he,{},N)(()=>z)};return{x:t,y:d,width:i,height:l,child:S,slots:w,style:F,dragging:g,onDragStart:v,onDrag:p,onDragStop:x,onResizeStart:f,onResize:c,onResizeStop:H,dragNode:z=>{const N={class:[g.value&&"vv-grid-layout--item__draggable","vv-grid-layout--item",!e.isDraggable&&"vv-grid-layout--item__disabled"],style:F.value},M={disabled:!e.isDraggable,startFn:v,stopFn:x,dragFn:p};return V(oe,N,M)(()=>E(z))}}},render(){const e=this.slots;return this.dragNode(e)}}),qe={modelValue:{type:Array,required:!0,default:()=>[]},autoHeight:{type:Boolean,default:!0},cols:{type:Number,default:12},maxRows:{type:Number,default:1/0},minW:{type:Number,default:1},minH:{type:Number,default:1},rowHeight:{type:Number,default:150},width:{type:Number,default:1200},margin:{type:Array,default:()=>[10,10]},containerPadding:{type:Array,default:void 0},disabledDrag:Boolean,disabledResize:Boolean,collision:Boolean},Je=Y({name:"GridLayout",inheritAttrs:!1,props:qe,emits:["update:modelValue"],setup(e,{emit:a}){const t=Xe(e);ce(fe,t);const d=D(null);function i(g){const F=g.key;if(!F)return;const o=t.getItem(String(F));if(!o)return;const s=!o.static&&!e.disabledDrag,v=!o.static&&!e.disabledResize,p={x:o.x,y:o.y,width:o.w,height:o.h,isDraggable:s,isResizable:v,scale:o.scale,dragEndFn:(x,f)=>{const{x:c,y:H}=f,S=t.moveTo(o,c,H);a("update:modelValue",S),d.value=null},dragStartFn:()=>{},dragFn:(x,f)=>{if(!o)return;const c={x:o.x,y:o.y,width:o.w,height:o.h},{x:H,y:S}=f;t.moveTo(o,H,S),d.value=c},resizeFn:(x,f)=>{const c={x:o.x,y:o.y,width:o.w,height:o.h};d.value=c;const{w:H,h:S}=f;t.resizeTo(o,H,S)},resizeStopFn:(x,f)=>{const{w:c,h:H}=f;t.resizeTo(o,c,H),d.value=null}};return V(re,{},p)({default:()=>g})}function l(){if(!d.value)return null;const{x:g,y:F,width:o,height:s}=d.value;return V(re,{class:"vv-grid-layout--placeholder"},{x:g,y:F,width:o,height:s,move:!1})()}return{processItem:i,placeholder:l,layout:t}},render(){const e={...this.$attrs.style||{},height:this.layout.calContainerHeight()},a=typeof this.$slots.default=="function"?this.$slots.default():this.$slots.default||[];return T("div",{class:"vv-grid-layout",style:e},[a.map(this.processItem),this.placeholder()])}}),Ze=Ge,et=Je,tt=Ae;export{tt as F,et as G,Qe as _,Ze as a};
