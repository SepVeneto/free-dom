import{l as Z,h as H,j as q,a2 as re,d as X,g as _,E as fe,o as oe,c as ve,k as me,J as ge,w as ye,b as we,L as pe,R as be,e as xe,r as Fe,F as _e,a3 as j,Q as ee,H as C,a4 as te,a1 as ze,A as Y,D as Re,X as ue,a5 as De}from"./framework.694d1d17.js";var ie;const Ne=typeof window<"u",se=()=>{};Ne&&((ie=window==null?void 0:window.navigator)!=null&&ie.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function ke(e){return typeof e=="function"?e():Z(e)}function He(e,a){function t(...u){return new Promise((s,l)=>{Promise.resolve(e(()=>a.apply(this,u),{fn:a,thisArg:this,args:u})).then(s).catch(l)})}return t}function Se(e,a=!0,t=!0,u=!1){let s=0,l,v=!0,p=se,o;const i=()=>{l&&(clearTimeout(l),l=void 0,p(),p=se)};return x=>{const y=ke(e),f=Date.now()-s,h=()=>o=x();return i(),y<=0?(s=Date.now(),h()):(f>y&&(t||!v)?(s=Date.now(),h()):a&&(o=new Promise((N,g)=>{p=u?g:N,l=setTimeout(()=>{s=Date.now(),v=!0,N(h()),i()},Math.max(0,y-f))})),!t&&!l&&(l=setTimeout(()=>v=!0,y)),v=!1,o)}}function Me(e,a=200,t=!1,u=!0,s=!1){return He(Se(a,t,u,s),e)}function $e(e){const a=H(1200);q(()=>{u(),window.addEventListener("resize",t)}),re(()=>{window.removeEventListener("resize",t)});const t=Me(u);function u(){var s;a.value=((s=e.value)==null?void 0:s.getBoundingClientRect().width)||1200}return a}const Ze=X({__name:"vp-demo",props:{source:{},demos:{},path:{}},setup(e){const a=e,t=H(),u=$e(t),s=_(()=>a.path.startsWith("grid-layout")),l=_(()=>({border:"1px solid black",width:s.value?"":"100%",height:s.value?"":"300px"})),v=_(()=>{const p=Object.keys(a.demos);for(const o of p)if(o.replace("../examples/","").replace(".vue","")===a.path)return a.demos[o].default;return!1});return(p,o)=>{const i=fe("ClientOnly");return oe(),ve(_e,null,[me("section",{ref_key:"wrapRef",ref:t,style:{width:"100%"}},[ge(i,null,{default:ye(()=>[v.value?(oe(),we(pe(v.value),{key:0,style:be(l.value),width:Z(u)},null,8,["style","width"])):xe("",!0)]),_:1})],512),Fe(p.$slots,"source")],64)}}});const ne=Symbol("Scene");function W(e,a={},t={},u={}){if(!e)return()=>null;const s={...a,...t};return l=>j(e,s,l)}function P(e,a,t=1/0){return Math.max(Math.min(e,t),a)}function U(...e){}const Ee=["xt","xc","xb","yl","yc","yr"],Be=X({props:{showLine:Boolean},setup(){const e=ee(ne),a=C(Ee),t=H(e.diff),u=e.nodes,s=te({xt:{show:!1,pos:0},xc:{show:!1,pos:0},xb:{show:!1,pos:0},yl:{show:!1,pos:0},yc:{show:!1,pos:0},yr:{show:!1,pos:0}}),l=i=>{var x;const m=((x=u.find(y=>y.uuid===i))==null?void 0:x.node)??{};v(),u.forEach(y=>{if(y.uuid===i)return;const f=p(m._rect),h=p(y.node._rect);o(f.top,h.top)&&(s.xt={show:!0,pos:h.top},m._rect.y=h.top),o(f.bottom,h.top)&&(s.xt={show:!0,pos:h.top},m._rect.y=h.top-f.height),o(f.centerY,h.centerY)&&(s.xc={show:!0,pos:h.centerY},m._rect.y=h.centerY-f.height/2),o(f.top,h.bottom)&&(s.xb={show:!0,pos:h.bottom},m._rect.y=h.bottom),o(f.bottom,h.bottom)&&(s.xb={show:!0,pos:h.bottom},m._rect.y=h.bottom-f.height),o(f.left,h.left)&&(s.yl={show:!0,pos:h.left},m._rect.x=h.left),o(f.right,h.left)&&(s.yl={show:!0,pos:h.left},m._rect.x=h.left-f.width),o(f.centerX,h.centerX)&&(s.yc={show:!0,pos:h.centerX},m._rect.x=h.centerX-f.width/2),o(f.left,h.right)&&(s.yr={show:!0,pos:h.right},m._rect.x=h.right),o(f.right,h.right)&&(s.yr={show:!0,pos:h.right},m._rect.x=h.right-f.width)})};e==null||e.on("move",l),e==null||e.on("moveup",v),re(()=>{e==null||e.off("move"),e==null||e.off("moveup")});function v(){s.xt.show=!1,s.xc.show=!1,s.xb.show=!1,s.yl.show=!1,s.yc.show=!1,s.yr.show=!1}function p(i){return{deltaX:i.deltaX,deltaY:i.deltaY,top:i.y,bottom:i.y+i.height,left:i.x,right:i.x+i.width,width:i.width,height:i.height,centerX:i.x+i.width/2,centerY:i.y+i.height/2}}function o(i,m){return Math.abs(i-m)<=t.value}return{lines:a,diff:t,lineStatus:s}},render(){const e=(t,u)=>j("div",{style:{[t.includes("x")?"top":"left"]:u.pos+"px"},class:[t.includes("x")?"vv-free-dom--xline":"vv-free-dom--yline","vv-free-dom--line"]}),a=this.showLine?this.lines.filter(t=>this.lineStatus[t].show).map(t=>e(t,this.lineStatus[t])):[];return j("div",{class:"vv-free-dom--markline"},a)}});function J(){const e=ze(),a=_(()=>typeof e.default=="function"?e.default():e.default),t=_(()=>{var u;return(u=a.value)==null?void 0:u[0]});return{slots:a,only:t}}function Ve(e){const a=H(NaN),t=H(NaN);function u(s,l){const v=isNaN(a.value),p=Z(e);if(!p)throw new Error("drag node does not exist");return v?{node:p,deltaX:0,deltaY:0,lastX:s,lastY:l,x:s,y:l}:{node:p,deltaX:s-a.value,deltaY:l-t.value,lastX:a.value,lastY:t.value,x:s,y:l}}return{lastX:a,lastY:t,create:u}}function We(e){const a=H(e.x||e.modelValue.x||0),t=H(e.y||e.modelValue.y||0),u=H(0),s=H(0),l=H();Y(()=>{a.value=e.x||e.modelValue.x||0}),Y(()=>{t.value=e.y||e.modelValue.y||0});const v=(i,m)=>{a.value=m.x,t.value=m.y,u.value=m.deltaX,s.value=m.deltaY,e.dargFn(i,m)},p=(i,m)=>{const x=l.value=o(m);e.dragStopFn(i,x)};function o(i){return{node:i.node,x:a.value+i.deltaX,y:t.value+i.deltaY,deltaX:i.deltaX,deltaY:i.deltaY,lastX:a.value,lastY:t.value}}return{x:a,y:t,deltaX:u,deltaY:s,create:o,handleDrag:v,handleDragStop:p}}let Le=0;function Pe(e,a){const t=ee(ne,void 0),u=Le++,s=_(()=>(t==null?void 0:t.lockAspectRatio)||a.lockAspectRatio),l=_(()=>(t==null?void 0:t.minWidth)||a.minWidth),v=_(()=>(t==null?void 0:t.minHeight)||a.minHeight),p=_(()=>(t==null?void 0:t.disabledDrag)||a.disabledDrag),o=_(()=>(t==null?void 0:t.disabledResize)||a.disabledResize),i=_(()=>(t==null?void 0:t.scale)||a.scale),m=_(()=>(t==null?void 0:t.fixNonMonospaced)||a.fixNonMonospaced);q(()=>{t==null||t.register(u,e)});function x(y){return t?t.checkValid(y):!0}return{emit:y=>t==null?void 0:t.emit(y,u),check:x,width:t==null?void 0:t.width,height:t==null?void 0:t.height,scale:i,lockAspectRatio:s,minWidth:l,minHeight:v,disabledDrag:p,disabledResize:o,fixNonMonospaced:m}}function Xe(){const e=H({});return{on:(s,l)=>{e.value[s]?e.value[s].push(l):e.value[s]=[l]},off:s=>{e.value[s].length=0},emit:(s,l)=>{(e.value[s]||[]).forEach(p=>p(l))}}}function Ye(e,a){const t=H(s()),u=H(l());Y(()=>{t.value=s()}),Y(()=>{u.value=l()});function s(){return e.width||e.modelValue.w}function l(){return e.height||e.modelValue.h}async function v(p,o,i){if(e.width&&e.height||e.modelValue.w&&e.modelValue.h)return;if(!a.value)return[0,0];p&&await document.fonts.ready;const{width:m,height:x}=window.getComputedStyle(a.value.$el);t.value=Math.max(Math.ceil(parseFloat(m)),o),u.value=Math.max(Math.ceil(parseFloat(x)),i)}return{width:t,height:u,syncSize:v}}function Ae(e){const a=C(e.modelValue);Y(()=>{a.value=e.modelValue});const t=_(()=>{var r;return(e.width-l.value[0]*(u.value-1)-(((r=p.value)==null?void 0:r[0])||l.value[0])*2)/e.cols}),u=_(()=>e.cols),s=_(()=>e.rowHeight),l=_(()=>e.margin),v=_(()=>e.maxRows),p=_(()=>e.containerPadding),o=_(()=>e.minW),i=_(()=>e.minH);function m(r){return a.value.find(n=>n.i===r)}function x(){return a.value}function y(r,n,d,c,b,z){if(n.static||n.y===c&&n.x===d)return r;U(`Moving element ${n.i} to [${String(d)},${String(c)}] from [${n.x},${n.y}]`);const R=n.x,B=n.y;typeof d=="number"&&(n.x=d),typeof c=="number"&&(n.y=c),n.moved=!0;const I=g(r).filter(V=>M(V,n));return I.length>0&&z?(n.x=R,n.y=B,n.moved=!1,r):(I.forEach(V=>{U(`Resolving collision between ${n.i} at [${n.x},${n.y}] and ${V.i} at [${V.x},${V.y}]`,V.moved,V.i),!V.moved&&(V.static?r=f(r,V,n,b):r=f(r,n,V,b))}),r)}function f(r,n,d,c){const b=n.static;if(c){c=!1;const z={x:d.x,y:Math.max(n.y-d.h,0),w:d.w,h:d.h,i:"-1"};if(!E(r,z))return U(`Doing reverse collision on ${d.i} up to [${z.x},${z.y}].`),y(r,d,void 0,z.y,c,b)}return y(r,d,void 0,d.y+1,c,b)}function h(r,n,d){const b=y(a.value,r,n,d,!0,!e.collision);return a.value=w(b),a.value}function N(r,n,d){let c=!1;if(!e.collision){const b=a.value.filter(z=>M(z,{...r,w:n,h:d}));if(c=b.length>0,c){let z=1/0,R=1/0;b.forEach(B=>{B.x>r.x&&(z=Math.min(B.x,z)),B.y>r.y&&(R=Math.min(B.y,R))}),Number.isFinite(z)&&(r.w=z-r.x),Number.isFinite(R)&&(r.h=R-r.y)}}c||(r.w=n,r.h=d),a.value=w([...a.value])}function g(r){return r.slice(0).sort((n,d)=>n.y>d.y||n.y===d.y&&n.x>d.x?1:n.y===d.y&&n.x===d.x?0:-1)}function M(r,n){return r.i===n.i||r.x+r.w<=n.x||r.x>=n.x+n.w||r.y+r.h<=n.y?!1:!(r.y>=n.y+n.h)}function E(r,n){for(let d=0;d<r.length;++d)if(M(r[d],n))return r[d]}function w(r){const n=r.filter(b=>b.static),d=g(r),c=new Array(r.length);return d.forEach((b,z)=>{let R=JSON.parse(JSON.stringify(b));R.static||(R=F(n,R,d),n.push(R)),c[r.indexOf(d[z])]=R,R.moved=!1}),c}function F(r,n,d){if(e.collision)for(n.y=Math.min(k(r),n.y);n.y>0&&!E(r,n);)--n.y;let c;for(;(c=E(r,n))&&e.collision;)D(d,n,c.y+c.h,"y");return n}function k(r){let n=0;return r.forEach(d=>{const c=d.y+d.h;c>n&&(n=c)}),n}function S(){var n;if(!e.autoHeight)return;const r=k(a.value);return`${r*e.rowHeight+l.value[1]*(r-1)+(((n=p.value)==null?void 0:n[1])||l.value[1])*2}px`}const $={x:"w",y:"h"};function D(r,n,d,c){const b=$[c];n[c]+=1;const z=r.findIndex(R=>R===n);for(let R=z+1;R<r.length;++R){const B=r[R];if(B.y>n.y+n.h)break;M(n,B)&&D(r,B,d+n[b],c)}n[c]=d}return{cellWidth:t,cols:u,rowHeight:s,margin:l,maxRows:v,containerPadding:p,minW:o,minH:i,calContainerHeight:S,moveTo:h,resizeTo:N,getItem:m,getFull:x}}function Ie(e,a){const{cellWidth:t,margin:u,rowHeight:s,cols:l,maxRows:v,containerPadding:p}=a,o=H(),i=H(),m=_(()=>p.value||u.value),x=_(()=>o.value?Math.round(o.value.x):Math.round(e.x*(t.value+u.value[0])+m.value[0])),y=_(()=>o.value?Math.round(o.value.y):Math.round(e.y*(s.value+u.value[1])+m.value[1])),f=_(()=>i.value?Math.round(i.value.width):Math.round(t.value*e.width+Math.max(0,e.width-1)*u.value[0])),h=_(()=>i.value?Math.round(i.value.height):Math.round(s.value*e.height+Math.max(0,e.height-1)*u.value[1])),N=_(()=>{const n=a.minW.value;return Math.round(t.value*n+Math.max(0,n-1)*u.value[0])}),g=_(()=>{const n=a.minH.value;return Math.round(s.value*n+Math.max(0,n-1)*u.value[1])}),M=_(()=>({position:"absolute",width:`${f.value}px`,height:`${h.value}px`,transform:`translate(${x.value}px, ${y.value}px)`})),E=(n,{node:d})=>{const c=d.offsetParent.getBoundingClientRect(),b=d.getBoundingClientRect();o.value={x:b.left-c.left+d.offsetParent.scrollLeft,y:b.top-c.top+d.offsetParent.scrollTop}},w=(n,d)=>{if(!o.value)throw new Error("onDrag called before onDragStart");const{deltaX:c,deltaY:b}=d,z=o.value.x+c,R=o.value.y+b;o.value={x:z,y:R};const{x:B,y:A}=D(z,R);e.dragFn(n,{x:B,y:A})},F=n=>{if(!o.value)throw new Error("onDragStop called before onDratStart");const{x:d,y:c}=o.value,{x:b,y:z}=D(d,c);o.value=void 0,e.dragEndFn(n,{x:b,y:z})},k=(n,{width:d,height:c})=>{i.value={width:d,height:c}},S=(n,d)=>{const{width:c,height:b}=d,{w:z,h:R}=r(c,b);i.value={width:c,height:b},e.resizeFn(n,{w:z,h:R})},$=(n,d)=>{i.value=void 0;const{width:c,height:b}=d,{w:z,h:R}=r(c,b);e.resizeStopFn(n,{w:z,h:R})};function D(n,d){let c=Math.round((n-u.value[0])/(t.value+u.value[0])),b=Math.round((d-u.value[1])/(s.value+u.value[1]));return c=P(c,0,l.value-e.width),b=P(b,0,v.value-e.height),{x:c,y:b}}function r(n,d){let c=Math.round((n+u.value[0])/(t.value+u.value[0])),b=Math.round((d+u.value[1])/(s.value+u.value[1]));return c=P(c,0,l.value-e.x),b=P(b,0,v.value-e.y),{w:c,h:b}}return{x,y,width:f,height:h,dragging:o,resizing:i,style:M,minWidth:N,minHeight:g,onDragStart:E,onDrag:w,onDragStop:F,onResizeStart:k,onResize:S,onResizeStop:$}}function K(){}const Oe={userSelectHack:{type:Boolean,default:!0},startFn:{type:Function,default:K},stopFn:{type:Function,default:K},dragFn:{type:Function,default:K},disabled:Boolean},ae=X({name:"FreeDomCore",props:Oe,setup(e){const{only:a}=J(),t=H(!1),u=H(),s=_(()=>{var w;return((w=u.value)==null?void 0:w.$el)||u.value}),l=_(()=>{var w;return(w=s.value)==null?void 0:w.ownerDocument}),{lastX:v,lastY:p,create:o}=Ve(s);let i,m;Re(()=>{l.value&&(e.userSelectHack&&h(l.value),l.value.removeEventListener("mousemove",M),l.value.removeEventListener("mouseup",g))});function x(w){return N(w)}function y(w){g(w)}function f(w){if(w){if(!w.getElementById("free-dom-style-el")){const F=w.createElement("style");F.id="free-dom-style-el",F.innerHTML=".free-dom-transparent-selection *::selection {all: inherit;}",w.getElementsByTagName("head")[0].appendChild(F)}w.body&&w.body.classList.add("free-dom-transparent-selection")}}function h(w){if(!w)return;w.body&&w.body.classList.remove("free-dom-transparent-selection");const F=w.getSelection();F&&F.removeAllRanges()}function N(w){var $,D;if(e.disabled||!w.target||!(w.target instanceof s.value.ownerDocument.defaultView.Node))return;const{x:F,y:k}=E(w),S=o(F,k);e.startFn(w,S),v.value=F,p.value=k,t.value=!0,e.userSelectHack&&f(l.value),($=l.value)==null||$.addEventListener("mousemove",M),(D=l.value)==null||D.addEventListener("mouseup",g)}function g(w){var $,D;if(!t.value)return;const{x:F,y:k}=E(w),S=o(F,k);e.stopFn(w,S),e.userSelectHack&&h(l.value),t.value=!1,v.value=NaN,p.value=NaN,($=l.value)==null||$.removeEventListener("mousemove",M),(D=l.value)==null||D.removeEventListener("mouseup",g)}function M(w){const{x:F,y:k}=E(w),S=o(F,k);e.dragFn(w,S),v.value=F,p.value=k}function E(w){var D;const F=((D=s.value)==null?void 0:D.offsetParent)||l.value.body,k=F===F.ownerDocument.body;(!i||i!==F)&&(i=F,m=k?{left:0,top:0}:F.getBoundingClientRect());const S=w.clientX+F.scrollLeft-m.left,$=w.clientY+F.scrollTop-m.top;return{x:S,y:$}}return{only:a,coreRef:u,mousedownFn:x,mouseupFn:y}},render(){this.mouseupFn;const e={onMousedown:t=>{t.stopPropagation(),this.mousedownFn(t)},onMouseup:this.mouseupFn},a=W(this.only,{ref:t=>{this.coreRef=t}},e,{});return typeof a=="function"?a():a}}),Te=["t","r","l","b","lt","lb","rt","rb"];function Q(){}const G={dragOpts:{type:Object,default:()=>({})},width:{type:Number,default:0},height:{type:Number,default:0},scale:{type:[Boolean,Array],default:void 0},startFn:{type:Function,default:Q},stopFn:{type:Function,default:Q},resizeFn:{type:Function,default:Q},minWidth:{type:Number,default:50},minHeight:{type:Number,default:50},lockAspectRatio:Boolean},de=X({name:"ResizeDomCore",props:G,setup(e,{slots:a}){const{slots:t}=J(),u=_(()=>{const o=e.scale;return Array.isArray(o)?o:Te}),s=C();function l(o,i){const{lockAspectRatio:m}=e;if(!e.minHeight&&!e.minWidth&&!m)return[o,i];if(m){const x=e.width/e.height,y=o-e.width,f=i-e.height;Math.abs(y)>Math.abs(f*x)?i=o/x:o=i*x}return o=Math.max(o,e.minWidth),i=Math.max(i,e.minHeight),[o,i]}function v(o,i){return(m,{node:x,deltaX:y,deltaY:f})=>{o==="start"&&(s.value=void 0);const h=i!=="t"&&i!=="b",N=i!=="l"&&i!=="r",g=i[0],M=i[i.length-1],E=x.getBoundingClientRect();s.value=E,g==="l"&&(y=-y),M==="t"&&(f=-f);let w=e.width+(h?y:0),F=e.height+(N?f:0);[w,F]=l(w,F);const k=w!==e.width||F!==e.height,S=`${o}Fn`,$=typeof e[S]=="function"?e[S]:null;$&&!(o==="resize"&&!k)&&$(m,{node:x,width:w,height:F,handle:i}),o==="stop"&&(s.value=void 0)}}function p(o){return a.handler?()=>{var i;return(i=a.handler)==null?void 0:i.call(a,o)}:()=>j("i",{class:["vv-resize-dom--handler",`vv-resize-dom--handler__${o}`]})}return{dots:u,children:t,handleResize:v,renderResizehandler:p}},render(){const e=[...this.children||[],this.dots.map(a=>W(ae,{class:[this.dragOpts.disabled&&"vv-resize-dom--disabled"]},{...this.dragOpts,stopFn:this.handleResize("stop",a),startFn:this.handleResize("start",a),dragFn:this.handleResize("resize",a)})(this.renderResizehandler(a)))];return W("div",{class:"vv-resize-dom--box"})(e)}});function O(){}const L={modelValue:{type:Object,default:()=>({})},x:{type:Number,default:0},y:{type:Number,default:0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},lockAspectRatio:Boolean,dragStartFn:{type:Function,default:O},dragStopFn:{type:Function,default:O},dargFn:{type:Function,default:O},resizeStartFn:{type:Function,default:O},resizeFn:{type:Function,default:O},resizeStopFn:{type:Function,default:O},autoSize:{type:Boolean,default:!0},minWidth:G.minWidth,minHeight:G.minHeight,disabledDrag:Boolean,disabledResize:Boolean,scale:G.scale,fixNonMonospaced:Boolean},Ge=X({name:"FreeDom",props:L,emits:["update:width","update:height","update:x","update:y","update:modelValue"],setup(e,{emit:a,expose:t,slots:u}){const s=H(),{x:l,y:v,deltaX:p,deltaY:o,create:i,handleDrag:m,handleDragStop:x}=We(e),{width:y,height:f,syncSize:h}=Ye(e,s),N={_rect:te({x:l,y:v,width:y,height:f,deltaX:p,deltaY:o}),trigger:()=>{}},g=Pe(N,e),M=()=>{h(g.fixNonMonospaced.value,g.minWidth.value,g.minHeight.value)};q(()=>{e.autoSize&&M()});const E=_(()=>({position:"absolute",width:`${y.value}px`,height:`${f.value}px`,transform:`translate(${l.value}px, ${v.value}px)`})),w=(D,r)=>{var b;const n=i(r),d={x:n.x,y:n.y,width:y.value,height:f.value};(b=g.check)!=null&&b.call(g,d)&&(m(D,n),g.emit("move"))},F=(D,r)=>{var c;const n={x:l.value,y:v.value,width:y.value,height:f.value};((c=g.check)==null?void 0:c.call(g,n))||(l.value=P(l.value,0,g.width),v.value=P(v.value,0,g.height)),x(D,r),g.emit("moveup"),a("update:x",l.value),a("update:y",v.value),a("update:modelValue",{x:l.value,y:v.value,w:y.value,h:f.value})},k=(D,{node:r,width:n,height:d,handle:c})=>{var V;const b=-(n-y.value),z=-(d-f.value),R=c[0],B=c[c.length-1];let A=l.value,I=v.value;R==="l"&&(A+=b),B==="t"&&(I+=z),(V=g.check)!=null&&V.call(g,{x:A,y:I,width:n,height:d})&&(y.value=n,f.value=d,l.value=A,v.value=I,e.resizeFn(D,{node:r,width:n,height:d,handle:c}),g==null||g.emit("move"))},S=()=>{var r;((r=g.check)==null?void 0:r.call(g,{x:l.value,y:v.value,width:y.value,height:f.value}))||(l.value=P(l.value,0,g.width),v.value=P(v.value,0,g.height)),a("update:width",y.value),a("update:height",f.value),a("update:modelValue",{x:l.value,y:v.value,w:y.value,h:f.value}),g.emit("moveup")},$=()=>{const D={width:y.value,height:f.value,lockAspectRatio:g.lockAspectRatio.value,dragOpts:{disabled:g.disabledResize.value},resizeFn:k,stopFn:S,minHeight:g.minHeight.value,minWidth:g.minWidth.value,scale:g.scale.value};return W(de,{},D)(u)};return t==null||t({syncSize:M}),{domRef:s,style:E,onDragStop:F,onDrag:w,resizeNode:$,disabled:g.disabledDrag}},render(){var t;const e={stopFn:this.onDragStop,dragFn:this.onDrag,disabled:this.disabled},a=()=>this.resizeNode();return(t=W(ae,{ref:"domRef",class:"vv-free-dom--draggable",style:this.style},e))==null?void 0:t(a)}}),je={width:{type:Number,default:void 0},height:{type:Number,default:void 0},diff:{type:Number,default:2},showLine:{type:Boolean,default:!0},minWidth:L.minWidth,minHeight:L.minHeight,lockAspectRatio:L.lockAspectRatio,disabledDrag:L.disabledDrag,disabledResize:L.disabledResize,scale:L.scale,fixNonMonospaced:L.fixNonMonospaced},qe=X({name:"FreeDomWrap",props:je,setup(e){const{slots:a}=J(),t=Xe(),u=C(),s=H([]),l=H(e.width),v=H(e.height);Y(()=>{l.value=e.width}),Y(()=>{v.value=e.height}),q(()=>{var m;if(!e.width||!e.height){u.value||console.warn("[free-dom] cannot find element, width or height may be set to 0");const{width:x,height:y}=((m=u.value)==null?void 0:m.getBoundingClientRect())||{};e.width||(l.value=x||0),e.height||(v.value=y||0)}});function p(m,x){s.value.push({uuid:m,node:x})}function o(m){const{x,y,width:f,height:h}=m;return x>=0&&x+f<=l.value&&y>=0&&y+h<=v.value}ue(ne,te({...De(e),nodes:s,width:l,height:v,register:p,checkValid:o,on:t.on,off:t.off,emit:t.emit}));const i=_(()=>({width:`${e.width}px`,height:`${e.height}px`}));return{rectRef:u,style:i,slots:a}},render(){const e=W(Be,{},{showLine:this.showLine})(),a=[this.slots,e];return W("section",{ref:"rectRef",class:"vv-free-dom--scene",style:this.style})(a)}}),ce=Symbol("gridLayoutContext"),T=()=>{},Ce={x:{type:Number,required:!0},y:{type:Number,required:!0},width:{type:Number,required:!0},height:{type:Number,required:!0},dragStartFn:{type:Function,default:T},dragFn:{type:Function,default:T},dragEndFn:{type:Function,default:T},resizeStartFn:{type:Function,default:T},resizeFn:{type:Function,default:T},resizeStopFn:{type:Function,default:T},isDraggable:Boolean,isResizable:Boolean,scale:{type:G.scale.type,default:()=>["rb"]}},Je=["dragMove"],le=X({name:"GridItem",props:Ce,emits:Je,setup(e){const a=ee(ce);if(!a)throw new Error("TODO");const{x:t,y:u,width:s,height:l,dragging:v,style:p,minWidth:o,minHeight:i,onDragStart:m,onDrag:x,onDragStop:y,onResizeStart:f,onResize:h,onResizeStop:N}=Ie(e,a),{only:g,slots:M}=J(),E=F=>{const k={width:s.value,height:l.value,scale:e.scale,dragOpts:{disabled:!e.isResizable},minWidth:o.value,minHeight:i.value,startFn:f,resizeFn:h,stopFn:N};return W(de,{},k)(()=>F)};return{x:t,y:u,width:s,height:l,child:g,slots:M,style:p,dragging:v,onDragStart:m,onDrag:x,onDragStop:y,onResizeStart:f,onResize:h,onResizeStop:N,dragNode:F=>{const k={class:[v.value&&"vv-grid-layout--item__draggable","vv-grid-layout--item",!e.isDraggable&&"vv-grid-layout--item__disabled"],style:p.value},S={disabled:!e.isDraggable,startFn:m,stopFn:y,dragFn:x};return W(ae,k,S)(()=>E(F))}}},render(){const e=this.slots;return this.dragNode(e)}}),Ue={modelValue:{type:Array,required:!0,default:()=>[]},autoHeight:{type:Boolean,default:!0},cols:{type:Number,default:12},maxRows:{type:Number,default:1/0},minW:{type:Number,default:1},minH:{type:Number,default:1},rowHeight:{type:Number,default:150},width:{type:Number,default:1200},margin:{type:Array,default:()=>[10,10]},containerPadding:{type:Array,default:void 0},disabledDrag:Boolean,disabledResize:Boolean,collision:Boolean},Ke=X({name:"GridLayout",inheritAttrs:!1,props:Ue,emits:["update:modelValue"],setup(e,{emit:a}){const t=Ae(e);ue(ce,t);const u=H(null);function s(v){const p=v.key;if(!p)return;const o=t.getItem(String(p));if(!o)return;const i=!o.static&&!e.disabledDrag,m=!o.static&&!e.disabledResize,x={x:o.x,y:o.y,width:o.w,height:o.h,isDraggable:i,isResizable:m,scale:o.scale,dragEndFn:(y,f)=>{const{x:h,y:N}=f,g=t.moveTo(o,h,N);a("update:modelValue",g),u.value=null},dragStartFn:()=>{},dragFn:(y,f)=>{if(!o)return;const h={x:o.x,y:o.y,width:o.w,height:o.h},{x:N,y:g}=f;t.moveTo(o,N,g),u.value=h},resizeFn:(y,f)=>{const h={x:o.x,y:o.y,width:o.w,height:o.h};u.value=h;const{w:N,h:g}=f;t.resizeTo(o,N,g)},resizeStopFn:(y,f)=>{const{w:h,h:N}=f;t.resizeTo(o,h,N),u.value=null}};return W(le,{},x)({default:()=>v})}function l(){if(!u.value)return null;const{x:v,y:p,width:o,height:i}=u.value;return W(le,{class:"vv-grid-layout--placeholder"},{x:v,y:p,width:o,height:i,move:!1})()}return{processItem:s,placeholder:l,layout:t}},render(){const e={...this.$attrs.style||{},height:this.layout.calContainerHeight()},a=typeof this.$slots.default=="function"?this.$slots.default():this.$slots.default||[];return j("div",{class:"vv-grid-layout",style:e},[a.map(this.processItem),this.placeholder()])}}),et=qe,tt=Ke,nt=Ge;export{nt as F,tt as G,Ze as _,et as a};
