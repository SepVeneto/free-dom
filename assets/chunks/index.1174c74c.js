import{u as Ie,a as xe,b as $e,o as Le}from"./theme.d1cfb442.js";import{r as S,a as ee,a4 as Ce,e as V,c as z,C as Xe,f as we,h as Ae,x as We,H as Ye,m as Oe,l as Ve,k as je,J as Te,p as Ge,i as Ke,F as he,a2 as G,N as ve,E as te,a5 as U,$ as qe,u as Je,d as K,B as De,w as ne,a6 as Ue,V as _e,a7 as ke}from"./framework.450954f1.js";function Ze(e){const a=S(1200);ee(()=>{n(),window.addEventListener("resize",t)}),Ce(()=>{window.removeEventListener("resize",t)});const t=Ie(n);function n(){var f;a.value=((f=e.value)==null?void 0:f.getBoundingClientRect().width)||1200}return a}const Bt=V({__name:"vp-demo",props:{source:{},demos:{},path:{}},setup(e){const a=S();Ze(a);const t=e,n=z(()=>t.path.startsWith("grid-layout")),f=z(()=>{const c=Object.keys(t.demos);for(const g of c)if(g.replace("../examples/","").replace(".vue","")===t.path)return t.demos[g].default;return!1});return(c,g)=>{const d=Xe("ClientOnly");return we(),Ae(he,null,[We("section",{ref_key:"wrapRef",ref:a,style:{width:"100%"}},[Ye(d,null,{default:Oe(()=>[f.value?(we(),Ve(Te(f.value),{key:0,class:je(n.value?"grid-wrap":"free-wrap")},null,8,["class"])):Ge("",!0)]),_:1})],512),Ke(c.$slots,"source")],64)}}});const me=Symbol("Scene");function W(e,a={},t={},n={}){if(!e)return()=>null;const f=et(n),c={...a,...t,...f};return g=>G(e,c,g)}const Qe=/^nativeOn([A-Z]\S*)/;function et(e){const a={};let t=!1;Object.entries(e).forEach(([f,c])=>{{t=!0;const g=f.replace(Qe,(d,l)=>`on${l}`);a[g]=c}});const n={};return t&&(n.on=a),n.on}function A(e,a,t=1/0){return Math.max(Math.min(e,t),a)}function le(...e){}function Me(e){if(e){if(!e.getElementById("free-dom-style-el")){const a=e.createElement("style");a.id="free-dom-style-el",a.innerHTML=".free-dom-transparent-selection *::selection {all: inherit;}",e.getElementsByTagName("head")[0].appendChild(a)}e.body&&e.body.classList.add("free-dom-transparent-selection")}}function de(e){if(!e)return;e.body&&e.body.classList.remove("free-dom-transparent-selection");const a=e.getSelection();a&&a.removeAllRanges()}function tt(e,a,t,n,f){const{margin:c,cols:g,rowHeight:d,maxRows:l}=e,y=nt(e);let r=Math.round((a-c[0])/(y+c[0])),i=Math.round(t-c[1]/(d+c[1]));return r=A(r,0,g-n),i=A(i,0,l-f),{x:r,y:i}}function nt(e){const{margin:a,containerPadding:t,width:n,cols:f}=e;return(n-a[0]*(f-1)-t[0]*2)/f}const at=["xt","xc","xb","yl","yc","yr"],ot=V({props:{showLine:Boolean},setup(){const e=ve(me),a=te(at),t=z(()=>e.diff/e.transformScale),n=e.nodes,f=z(()=>n.filter(r=>!r.node.selected)),c=U({xt:{show:!1,pos:0},xc:{show:!1,pos:0},xb:{show:!1,pos:0},yl:{show:!1,pos:0},yc:{show:!1,pos:0},yr:{show:!1,pos:0}}),g=(r,i)=>{var _;const h=(_=n.find(N=>N.uuid===r))==null?void 0:_.node;h&&(d(),f.value.forEach(N=>{if(N.uuid===r)return;const v=l(h._rect),m=l(N.node._rect);y(v.top,m.top,i)&&(c.xt={show:!0,pos:m.top},h._rect.y=m.top),y(v.bottom,m.top,i)&&(c.xt={show:!0,pos:m.top},h._rect.y=m.top-v.height),y(v.centerY,m.centerY,i)&&(c.xc={show:!0,pos:m.centerY},h._rect.y=m.centerY-v.height/2),y(v.top,m.bottom,i)&&(c.xb={show:!0,pos:m.bottom},h._rect.y=m.bottom),y(v.bottom,m.bottom,i)&&(c.xb={show:!0,pos:m.bottom},h._rect.y=m.bottom-v.height),y(v.left,m.left,i)&&(c.yl={show:!0,pos:m.left},h._rect.x=m.left),y(v.right,m.left,i)&&(c.yl={show:!0,pos:m.left},h._rect.x=m.left-v.width),y(v.centerX,m.centerX,i)&&(c.yc={show:!0,pos:m.centerX},h._rect.x=m.centerX-v.width/2),y(v.left,m.right,i)&&(c.yr={show:!0,pos:m.right},h._rect.x=m.right),y(v.right,m.right,i)&&(c.yr={show:!0,pos:m.right},h._rect.x=m.right-v.width)}))};e==null||e.on("move",g),e==null||e.on("moveup",d),Ce(()=>{e==null||e.off("move"),e==null||e.off("moveup")});function d(){c.xt.show=!1,c.xc.show=!1,c.xb.show=!1,c.yl.show=!1,c.yc.show=!1,c.yr.show=!1}function l(r){return{deltaX:r.deltaX,deltaY:r.deltaY,top:r.y,bottom:r.y+r.height,left:r.x,right:r.x+r.width,width:r.width,height:r.height,centerX:r.x+r.width/2,centerY:r.y+r.height/2}}function y(r,i,h){const _=h?0:t.value;return Math.abs(r-i)<=_}return{lines:a,diff:t,lineStatus:c}},render(){const e=(t,n)=>G("div",{style:{[t.includes("x")?"top":"left"]:n.pos+"px"},class:[t.includes("x")?"vv-free-dom--xline":"vv-free-dom--yline","vv-free-dom--line"]}),a=this.showLine?this.lines.filter(t=>this.lineStatus[t].show).map(t=>e(t,this.lineStatus[t])):[];return G("div",{class:"vv-free-dom--markline"},a)}});function ae(){const e=qe(),a=typeof e.default=="function"?e.default():e.default,t=a==null?void 0:a[0];return{slots:a,only:t}}function rt(e){const a=S(NaN),t=S(NaN);function n(f,c){const g=isNaN(a.value),d=Je(e);if(!d)throw new Error("drag node does not exist");return g?{node:d,deltaX:0,deltaY:0,lastX:f,lastY:c,x:f,y:c}:{node:d,deltaX:f-a.value,deltaY:c-t.value,lastX:a.value,lastY:t.value,x:f,y:c}}return{lastX:a,lastY:t,create:n}}function lt(e){const a=S(e.x||e.modelValue.x||0),t=S(e.y||e.modelValue.y||0),n=S(0),f=S(0),c=S();K(()=>{a.value=e.x||e.modelValue.x||0}),K(()=>{t.value=e.y||e.modelValue.y||0});const g=(r,i)=>{e.dragStartFn(r,i)},d=(r,i)=>{a.value=Math.round(i.x),t.value=Math.round(i.y),n.value=i.deltaX,f.value=i.deltaY,e.dragFn(r,i)},l=(r,i)=>{const h=c.value=y(i);e.dragStopFn(r,h)};function y(r){return{node:r.node,x:a.value+r.deltaX,y:t.value+r.deltaY,deltaX:r.deltaX,deltaY:r.deltaY,lastX:a.value,lastY:t.value}}return{x:a,y:t,deltaX:n,deltaY:f,create:y,handleDragStart:g,handleDrag:d,handleDragStop:l}}let st=0;function it(e,a,t){const n=ve(me,void 0),f=st++,c=z(()=>(n==null?void 0:n.handle)||t.handle),g=z(()=>(n==null?void 0:n.lockAspectRatio)||t.lockAspectRatio),d=z(()=>(n==null?void 0:n.minWidth)||t.minWidth),l=z(()=>(n==null?void 0:n.minHeight)||t.minHeight),y=z(()=>(n==null?void 0:n.disabledDrag)||t.disabledDrag),r=z(()=>(n==null?void 0:n.disabledResize)||t.disabledResize),i=z(()=>(n==null?void 0:n.disabledSelect)||t.disabledSelect),h=z(()=>(n==null?void 0:n.scale)||t.scale),_=z(()=>(n==null?void 0:n.transformScale)||t.transformScale),N=z(()=>(n==null?void 0:n.fixNonMonospaced)||t.fixNonMonospaced),v=z(()=>(n==null?void 0:n.keyboard)||t.keyboard),m=z(()=>n==null?void 0:n.manualDiff),E=z(()=>t.mask!=null?t.mask:(n==null?void 0:n.mask)==null?!0:n.mask);ee(()=>{const o=e.value;if(!o){console.warn("[free-dom] mounted failed: element not found");return}n==null||n.register(o.$el,f,a)}),De(()=>{n==null||n.remove(f)});function b(o){return n?n.checkValid(o):!0}function k(o){return n?n.correct(o):o}return{emit:(o,w)=>{n==null||n.emit(o,f,w)},check:b,correct:k,clearSelectState:n==null?void 0:n.clearSelectState,width:n==null?void 0:n.width,height:n==null?void 0:n.height,history:n==null?void 0:n.history,scale:h,handle:c,lockAspectRatio:g,minWidth:d,minHeight:l,disabledDrag:y,disabledResize:r,disabledSelect:i,fixNonMonospaced:N,transformScale:_,keyboard:v,manualDiff:m,mask:E}}const q=S({});function ge(){return{on:(n,f)=>{q.value[n]?q.value[n].push(f):q.value[n]=[f]},off:n=>{q.value[n].length=0},emit:(n,...f)=>{(q.value[n]||[]).forEach(g=>g(...f))}}}function ut(e,a){const t=S(f()),n=S(c());K(()=>{t.value=f()}),K(()=>{n.value=c()});function f(){return e.w||e.modelValue.w||(e.autoSize?void 0:e.minWidth)}function c(){return e.h||e.modelValue.h||(e.autoSize?void 0:e.minHeight)}async function g(d,l,y){if(e.w&&e.h||e.modelValue.w&&e.modelValue.h)return;if(!a.value)return[0,0];d&&await document.fonts.ready;const{width:r,height:i}=window.getComputedStyle(a.value.$el);t.value=Math.max(Math.ceil(parseFloat(r)),l),n.value=Math.max(Math.ceil(parseFloat(i)),y)}return{width:t,height:n,syncSize:g}}function ct(e){const a=te(e.modelValue);ne(()=>e.modelValue,()=>{a.value=e.modelValue},{deep:!0});const t=z(()=>{var u;return(e.width-c.value[0]*(n.value-1)-(((u=d.value)==null?void 0:u[0])||c.value[0])*2)/e.cols}),n=z(()=>e.cols),f=z(()=>e.rowHeight),c=z(()=>e.margin),g=z(()=>e.maxRows),d=z(()=>e.containerPadding),l=z(()=>e.minW),y=z(()=>e.minH);function r(u){return a.value.find(s=>s.i===u)}function i(){return a.value}function h(u){a.value=u}function _(u,s,p,D,B,I){if(s.static||s.y===D&&s.x===p)return u;le(`Moving element ${s.i} to [${String(p)},${String(D)}] from [${s.x},${s.y}]`);const C=s.x,H=s.y;typeof p=="number"&&(s.x=p),typeof D=="number"&&(s.y=D),s.moved=!0;const L=E(u).filter(X=>b(X,s));return L.length>0&&I?(s.x=C,s.y=H,s.moved=!1,u):(L.forEach(X=>{le(`Resolving collision between ${s.i} at [${s.x},${s.y}] and ${X.i} at [${X.x},${X.y}]`,X.moved,X.i),!X.moved&&(X.static?u=N(u,X,s,B):u=N(u,s,X,B))}),u)}function N(u,s,p,D){const B=s.static;if(D){D=!1;const I={x:p.x,y:Math.max(s.y-p.h,0),w:p.w,h:p.h,i:"-1"};if(!k(u,I))return le(`Doing reverse collision on ${p.i} up to [${I.x},${I.y}].`),_(u,p,void 0,I.y,D,B)}return _(u,p,void 0,p.y+1,D,B)}function v(u,s,p){const B=_(a.value,u,s,p,!0,!e.collision);return a.value=o(B),a.value}function m(u,s,p){let D=!1;if(!e.collision){const B=a.value.filter(I=>b(I,{...u,w:s,h:p}));if(D=B.length>0,D){let I=1/0,C=1/0;B.forEach(H=>{H.x>u.x&&(I=Math.min(H.x,I)),H.y>u.y&&(C=Math.min(H.y,C))}),Number.isFinite(I)&&(u.w=I-u.x),Number.isFinite(C)&&(u.h=C-u.y)}}return D||(u.w=s,u.h=p),a.value=o([...a.value]),a.value}function E(u){return u.slice(0).sort((s,p)=>s.y>p.y||s.y===p.y&&s.x>p.x?1:s.y===p.y&&s.x===p.x?0:-1)}function b(u,s){return u.i===s.i||u.x+u.w<=s.x||u.x>=s.x+s.w||u.y+u.h<=s.y?!1:!(u.y>=s.y+s.h)}function k(u,s){for(let p=0;p<u.length;++p)if(b(u[p],s))return u[p]}function o(u){const s=u.filter(B=>B.static),p=E(u),D=new Array(u.length);return p.forEach((B,I)=>{let C=JSON.parse(JSON.stringify(B));C.static||(C=w(s,C,p),s.push(C)),D[u.indexOf(p[I])]=C,C.moved=!1}),D}function w(u,s,p){if(e.collision)for(s.y=Math.min(F(u),s.y);s.y>0&&!k(u,s);)--s.y;let D;for(;(D=k(u,s))&&e.collision;)$(p,s,D.y+D.h,"y");return s}function F(u){let s=0;return u.forEach(p=>{const D=p.y+p.h;D>s&&(s=D)}),s}function M(){var s;if(!e.autoHeight)return;const u=F(a.value);return`${u*e.rowHeight+c.value[1]*(u-1)+(((s=d.value)==null?void 0:s[1])||c.value[1])*2}px`}const R={x:"w",y:"h"};function $(u,s,p,D){const B=R[D];s[D]+=1;const I=u.findIndex(C=>C===s);for(let C=I+1;C<u.length;++C){const H=u[C];if(H.y>s.y+s.h)break;b(s,H)&&$(u,H,p+s[B],D)}s[D]=p}function x(u){a.value=[...a.value,u]}return{cellWidth:t,cols:n,rowHeight:f,margin:c,maxRows:g,containerPadding:d,minW:l,minH:y,updateDroppingItem:x,calContainerHeight:M,moveTo:v,resizeTo:m,getItem:r,getFull:i,setFull:h,normalize:o}}function dt(e,a){const{cellWidth:t,margin:n,rowHeight:f,cols:c,maxRows:g,containerPadding:d}=a,l=S(),y=S(),r=z(()=>d.value||n.value),i=z(()=>l.value?Math.round(l.value.x):Math.round(e.x*(t.value+n.value[0])+r.value[0])),h=z(()=>l.value?Math.round(l.value.y):Math.round(e.y*(f.value+n.value[1])+r.value[1])),_=z(()=>y.value?Math.round(y.value.width):Math.round(t.value*e.width+Math.max(0,e.width-1)*n.value[0])),N=z(()=>y.value?Math.round(y.value.height):Math.round(f.value*e.height+Math.max(0,e.height-1)*n.value[1])),v=z(()=>{const x=a.minW.value;return Math.round(t.value*x+Math.max(0,x-1)*n.value[0])}),m=z(()=>{const x=a.minH.value;return Math.round(f.value*x+Math.max(0,x-1)*n.value[1])}),E=z(()=>({position:"absolute",width:`${_.value}px`,height:`${N.value}px`,transform:`translate(${i.value}px, ${h.value}px)`})),b=(x,{node:u})=>{const s=u.offsetParent.getBoundingClientRect(),p=u.getBoundingClientRect();l.value={x:p.left-s.left+u.offsetParent.scrollLeft,y:p.top-s.top+u.offsetParent.scrollTop}},k=(x,u)=>{if(!l.value)throw new Error("onDrag called before onDragStart");const{deltaX:s,deltaY:p}=u,D=l.value.x+s,B=l.value.y+p;l.value={x:D,y:B};const{x:I,y:C}=R(D,B);e.dragFn(x,{x:I,y:C})},o=x=>{if(!l.value)throw new Error("onDragStop called before onDratStart");const{x:u,y:s}=l.value,{x:p,y:D}=R(u,s);l.value=void 0,e.dragEndFn(x,{x:p,y:D})},w=(x,{width:u,height:s})=>{y.value={width:u,height:s}},F=(x,u)=>{const{width:s,height:p}=u,{w:D,h:B}=$(s,p);y.value={width:s,height:p},e.resizeFn(x,{w:D,h:B})},M=(x,u)=>{y.value=void 0;const{width:s,height:p}=u,{w:D,h:B}=$(s,p);e.resizeStopFn(x,{w:D,h:B})};function R(x,u){let s=Math.round((x-n.value[0])/(t.value+n.value[0])),p=Math.round((u-n.value[1])/(f.value+n.value[1]));return s=A(s,0,c.value-e.width),p=A(p,0,g.value-e.height),{x:s,y:p}}function $(x,u){let s=Math.round((x+n.value[0])/(t.value+n.value[0])),p=Math.round((u+n.value[1])/(f.value+n.value[1]));return s=A(s,0,c.value-e.x),p=A(p,0,g.value-e.y),{w:s,h:p}}return{x:i,y:h,width:_,height:N,dragging:l,resizing:y,style:E,minWidth:v,minHeight:m,onDragStart:b,onDrag:k,onDragStop:o,onResizeStart:w,onResize:F,onResizeStop:M}}var Ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ft(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Pt(e){if(e.__esModule)return e;var a=e.default;if(typeof a=="function"){var t=function n(){if(this instanceof n){var f=[null];f.push.apply(f,arguments);var c=Function.bind.apply(a,f);return new c}return a.apply(this,arguments)};t.prototype=a.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var f=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,f.get?f:{enumerable:!0,get:function(){return e[n]}})}),t}var fe={exports:{}},se,be;function ht(){if(be)return se;be=1;var e=1e3,a=e*60,t=a*60,n=t*24,f=n*7,c=n*365.25;se=function(r,i){i=i||{};var h=typeof r;if(h==="string"&&r.length>0)return g(r);if(h==="number"&&isFinite(r))return i.long?l(r):d(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function g(r){if(r=String(r),!(r.length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(i){var h=parseFloat(i[1]),_=(i[2]||"ms").toLowerCase();switch(_){case"years":case"year":case"yrs":case"yr":case"y":return h*c;case"weeks":case"week":case"w":return h*f;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*t;case"minutes":case"minute":case"mins":case"min":case"m":return h*a;case"seconds":case"second":case"secs":case"sec":case"s":return h*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function d(r){var i=Math.abs(r);return i>=n?Math.round(r/n)+"d":i>=t?Math.round(r/t)+"h":i>=a?Math.round(r/a)+"m":i>=e?Math.round(r/e)+"s":r+"ms"}function l(r){var i=Math.abs(r);return i>=n?y(r,i,n,"day"):i>=t?y(r,i,t,"hour"):i>=a?y(r,i,a,"minute"):i>=e?y(r,i,e,"second"):r+" ms"}function y(r,i,h,_){var N=i>=h*1.5;return Math.round(r/h)+" "+_+(N?"s":"")}return se}function vt(e){t.debug=t,t.default=t,t.coerce=l,t.disable=c,t.enable=f,t.enabled=g,t.humanize=ht(),t.destroy=y,Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={};function a(r){let i=0;for(let h=0;h<r.length;h++)i=(i<<5)-i+r.charCodeAt(h),i|=0;return t.colors[Math.abs(i)%t.colors.length]}t.selectColor=a;function t(r){let i,h=null,_,N;function v(...m){if(!v.enabled)return;const E=v,b=Number(new Date),k=b-(i||b);E.diff=k,E.prev=i,E.curr=b,i=b,m[0]=t.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let o=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(F,M)=>{if(F==="%%")return"%";o++;const R=t.formatters[M];if(typeof R=="function"){const $=m[o];F=R.call(E,$),m.splice(o,1),o--}return F}),t.formatArgs.call(E,m),(E.log||t.log).apply(E,m)}return v.namespace=r,v.useColors=t.useColors(),v.color=t.selectColor(r),v.extend=n,v.destroy=t.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(_!==t.namespaces&&(_=t.namespaces,N=t.enabled(r)),N),set:m=>{h=m}}),typeof t.init=="function"&&t.init(v),v}function n(r,i){const h=t(this.namespace+(typeof i>"u"?":":i)+r);return h.log=this.log,h}function f(r){t.save(r),t.namespaces=r,t.names=[],t.skips=[];let i;const h=(typeof r=="string"?r:"").split(/[\s,]+/),_=h.length;for(i=0;i<_;i++)h[i]&&(r=h[i].replace(/\*/g,".*?"),r[0]==="-"?t.skips.push(new RegExp("^"+r.slice(1)+"$")):t.names.push(new RegExp("^"+r+"$")))}function c(){const r=[...t.names.map(d),...t.skips.map(d).map(i=>"-"+i)].join(",");return t.enable(""),r}function g(r){if(r[r.length-1]==="*")return!0;let i,h;for(i=0,h=t.skips.length;i<h;i++)if(t.skips[i].test(r))return!1;for(i=0,h=t.names.length;i<h;i++)if(t.names[i].test(r))return!0;return!1}function d(r){return r.toString().substring(2,r.toString().length-2).replace(/\.\*\?$/,"*")}function l(r){return r instanceof Error?r.stack||r.message:r}function y(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var mt=vt;(function(e,a){a.formatArgs=n,a.save=f,a.load=c,a.useColors=t,a.storage=g(),a.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const y="color: "+this.color;l.splice(1,0,y,"color: inherit");let r=0,i=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(r++,h==="%c"&&(i=r))}),l.splice(i,0,y)}a.log=console.debug||console.log||(()=>{});function f(l){try{l?a.storage.setItem("debug",l):a.storage.removeItem("debug")}catch{}}function c(){let l;try{l=a.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}function g(){try{return localStorage}catch{}}e.exports=mt(a);const{formatters:d}=e.exports;d.j=function(l){try{return JSON.stringify(l)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}}})(fe,fe.exports);var gt=fe.exports;const ze=ft(gt),Z=ze("freeDom:use-mask");function yt(e,a,t,n){const f=ge(),c=S(0),g=S(0),d=S(0),l=S(0),y=Se(t),r=S(!1),i=z(()=>{const x=d.value-c.value,u=l.value-g.value;return{visibility:h.value?"visible":"hidden",border:"2px solid rgb(0,120,215)",background:"rgb(0,120,215,0.3)",position:"absolute",top:g.value+(u<0?u:0)+"px",left:c.value+(x<0?x:0)+"px",width:Math.abs(x)+"px",height:Math.abs(u)+"px",zIndex:1}}),h=S(!1),_=S(!1),N=xe(e),v=z(()=>{var x;return(x=$e(e))==null?void 0:x.ownerDocument}),m=z(()=>t.value.filter(x=>!(a.disabledSelect||x.node.disabledSelect)));function E(){let x;m.value.forEach(u=>{const s=u.node._rect;if(s.x==null||s.y==null||s.width==null||s.height==null)return!1;const p=s.x,D=s.y,B=p+s.width,I=D+s.height,C=b(p,D,B,I);u.node.selected=C,C&&(x=u)}),x==null||x.el.focus()}function b(x,u,s,p){const D=Math.min(c.value,d.value),B=Math.min(g.value,l.value),I=Math.max(c.value,d.value),C=Math.max(g.value,l.value);Z("is selected",c.value,g.value,d.value,l.value);const H=k(D,I,x,s,Math.abs(x-s)/5),P=k(B,C,u,p,Math.abs(u-p)/5);return H&&P}function k(x,u,s,p,D){return Math.max(x,s)-Math.min(u,p)<=-D}function o(x){const u=x.clientX-N.x.value,s=x.clientY-N.y.value;return{x:u,y:s}}function w(x){if(a.disabledBatch)return;Me(v.value);const{x:u,y:s}=o(x);_.value=!0,c.value=u,g.value=s,d.value=u,l.value=s,document.addEventListener("mouseup",M)}function F(x){if(!_.value)return;r.value||(f.emit("batch-select","start"),r.value=!0);const{x:u,y:s}=o(x);Z(d.value,u,l.value,s),!(d.value===u&&l.value===s)&&(h.value=!0,Z("cal",u,0,n.width.value),d.value=A(u,0,n.width.value),l.value=A(s,0,n.height.value),Z("update last",d.value,l.value),$())}function M(){de(v.value),_.value=!1,h.value=!1,r.value=!1,d.value===c.value&&l.value===g.value||(y.push({type:"batch-select"}),setTimeout(()=>{f.emit("batch-select","end",{lastX:d.value,lastY:l.value,startX:c.value,startY:g.value}),d.value=0,l.value=0,c.value=0,g.value=0})),document.removeEventListener("mouseup",M)}function R(){return G("div",{id:"mask",style:i.value})}async function $(){E()}return{selecting:h,renderMask:R,handleMousedown:w,handleMousemove:F}}const ie=S([]),pt=S({canClear:!1});function Se(e){const a=z(()=>{var n;return(n=ie.value.slice(-1)[0])==null?void 0:n.type});function t(n){ie.value.push({...n,data:e})}return{state:pt,records:ie,lastOperate:a,push:t}}function ue(){}const wt={userSelectHack:{type:Boolean,default:!0},startFn:{type:Function,default:ue},stopFn:{type:Function,default:ue},dragFn:{type:Function,default:ue},disabled:Boolean,scale:{type:Number,default:1}},ye=V({name:"FreeDomCore",props:wt,setup(e){const a=S(!1),t=S(),n=z(()=>{var b;return((b=t.value)==null?void 0:b.$el)||t.value}),f=z(()=>{var b;return(b=n.value)==null?void 0:b.ownerDocument}),{lastX:c,lastY:g,create:d}=rt(n),l=S(NaN),y=S(NaN);let r,i;De(()=>{f.value&&(e.userSelectHack&&de(f.value),f.value.removeEventListener("mousemove",m),f.value.removeEventListener("mouseup",v))});function h(b){return N(b)}function _(b){v(b)}function N(b){var F,M;if(e.disabled||!b.target||!(b.target instanceof n.value.ownerDocument.defaultView.Node))return;const{x:k,y:o}=E(b),w=d(k,o);e.startFn(b,w),l.value=k,y.value=o,c.value=k,g.value=o,a.value=!0,e.userSelectHack&&Me(f.value),(F=f.value)==null||F.addEventListener("mousemove",m),(M=f.value)==null||M.addEventListener("mouseup",v)}function v(b){var k,o;if(a.value){if(!(l.value===c.value&&y.value===g.value)){const{x:w,y:F}=E(b),M=d(w,F);e.stopFn(b,M)}e.userSelectHack&&de(f.value),a.value=!1,c.value=NaN,g.value=NaN,(k=f.value)==null||k.removeEventListener("mousemove",m),(o=f.value)==null||o.removeEventListener("mouseup",v)}}function m(b){const{x:k,y:o}=E(b),w=d(k,o);e.dragFn(b,w),c.value=k,g.value=o}function E(b){var M;const k=((M=n.value)==null?void 0:M.offsetParent)||f.value.body,o=k===k.ownerDocument.body;(!r||r!==k)&&(r=k,i=o?{left:0,top:0}:k.getBoundingClientRect());const w=(b.clientX+k.scrollLeft-i.left)/e.scale,F=(b.clientY+k.scrollTop-i.top)/e.scale;return{x:w,y:F}}return{coreRef:t,mousedownFn:h,mouseupFn:_}},render(){const{only:e}=ae(),a=W(e,{ref:t=>{this.coreRef=t}},{},{onMousedown:t=>{t.stopPropagation(),t.button===0&&this.mousedownFn(t)},onMouseup:this.mouseupFn});return typeof a=="function"?a():a}}),bt=["t","r","l","b","lt","lb","rt","rb"];function ce(){}const J={dragOpts:{type:Object,default:()=>({})},width:{type:Number,default:0},height:{type:Number,default:0},scale:{type:[Boolean,Array],default:void 0},startFn:{type:Function,default:ce},stopFn:{type:Function,default:ce},resizeFn:{type:Function,default:ce},minWidth:{type:Number,default:50},minHeight:{type:Number,default:50},lockAspectRatio:Boolean},Ne=V({name:"ResizeDomCore",props:J,setup(e,{slots:a}){const t=z(()=>{const d=e.scale;return Array.isArray(d)?d:bt}),n=te();function f(d,l,y){const{lockAspectRatio:r}=e;if(!e.minHeight&&!e.minWidth&&!r)return[d,l];if(r&&y.length===2){const i=e.width/e.height;i>1?(l=Math.max(l,e.minHeight),d=l*i):(d=Math.max(d,e.minWidth),l=d/i)}else d=Math.max(d,e.minWidth),l=Math.max(l,e.minHeight);return[d,l]}function c(d,l){return(y,{node:r,deltaX:i,deltaY:h})=>{d==="start"&&(n.value=void 0);const _=l!=="t"&&l!=="b",N=l!=="l"&&l!=="r",v=l[0],m=l[l.length-1],E=r.getBoundingClientRect();n.value=E,v==="l"&&(i=-i),m==="t"&&(h=-h);let b=e.width+(_?i:0),k=e.height+(N?h:0);y.shiftKey||([b,k]=f(b,k,l));const o=b!==e.width||k!==e.height,w=`${d}Fn`,F=typeof e[w]=="function"?e[w]:null;F&&!(d==="resize"&&!o)&&F(y,{node:r,width:b,height:k,handle:l}),d==="stop"&&(n.value=void 0)}}function g(d){return a.handler?()=>{var l;return(l=a.handler)==null?void 0:l.call(a,d)}:()=>G("i",{dataType:"handler",class:["vv-resize-dom--handler",`vv-resize-dom--handler__${d}`]})}return{dots:t,handleResize:c,renderResizehandler:g}},render(){const{slots:e}=ae(),a=[...e||[],this.dots.map(t=>W(ye,{class:[this.dragOpts.disabled&&"vv-resize-dom--disabled"]},{...this.dragOpts,stopFn:this.handleResize("stop",t),startFn:this.handleResize("start",t),dragFn:this.handleResize("resize",t)})(this.renderResizehandler(t)))];return W("div",{class:"vv-resize-dom--box"})(a)}});function j(){}const O={w:{type:Number,default:void 0},h:{type:Number,default:void 0},x:{type:Number,default:void 0},y:{type:Number,default:void 0},mask:{type:Boolean,default:void 0},modelValue:{type:Object,default:()=>({})},active:{type:Boolean,default:void 0},keyboard:Boolean,handle:{type:String,default:void 0},lockAspectRatio:Boolean,dragStartFn:{type:Function,default:j},dragStopFn:{type:Function,default:j},dragFn:{type:Function,default:j},resizeStartFn:{type:Function,default:j},resizeFn:{type:Function,default:j},resizeStopFn:{type:Function,default:j},autoSize:{type:Boolean,default:!0},minWidth:J.minWidth,minHeight:J.minHeight,disabledDrag:Boolean,disabledResize:Boolean,disabledSelect:Boolean,scale:J.scale,transformScale:{type:Number,default:1},fixNonMonospaced:Boolean},Ft=V({name:"FreeDom",props:O,emits:["update:w","update:h","update:x","update:y","update:modelValue","select"],setup(e,{emit:a,expose:t,slots:n}){const f=S(),c=S(!1);ge().on("batch-select",C=>{c.value=C==="start"});const{x:d,y:l,deltaX:y,deltaY:r,create:i,handleDragStart:h,handleDrag:_,handleDragStop:N}=lt(e),{width:v,height:m,syncSize:E}=ut(e,f),b=S(!1);ne(()=>e.active,C=>{typeof C=="boolean"&&(b.value=C)},{immediate:!0}),K(()=>{a("select",b.value)});const k=U({disabledSelect:Ue(e,"disabledSelect"),selected:b,_rect:U({x:d,y:l,width:v,height:m,deltaX:y,deltaY:r}),trigger:C=>{a("update:modelValue",C)},props:e}),o=it(f,k,e);Le(f,()=>{!b.value||c.value||(b.value=!1)},{ignore:[o.clearSelectState&&".vv-free-dom--draggable"]});const w=()=>{E(o.fixNonMonospaced.value,o.minWidth.value,o.minHeight.value)},F=S(!1);ee(()=>{e.autoSize&&w()});const M=z(()=>({width:`${v.value}px`,height:`${m.value}px`,transform:`translate(${d.value}px, ${l.value}px)`})),R=(C,H)=>{var X;if(!F.value)return;const P=i(H),L={x:P.x,y:P.y,width:v.value,height:m.value};(X=o.check)!=null&&X.call(o,L)&&(_(C,P),o.emit("move",o.manualDiff.value?!C.shiftKey:C.shiftKey))},$=(C,H)=>{var Y,X;if(!F.value)return;const P={x:d.value,y:l.value,width:v.value,height:m.value};((Y=o.check)==null?void 0:Y.call(o,P))||(d.value=A(d.value,0,o.width),l.value=A(l.value,0,o.height)),N(C,H),o.emit("moveup"),a("update:x",d.value),a("update:y",l.value),a("update:modelValue",{x:d.value,y:l.value,w:v.value,h:m.value}),(X=o.history)==null||X.push({type:"move-end"})},x=(C,H)=>{const P=o.handle.value;P?P.startsWith(".")?F.value=C.target.classList.contains(P.slice(1)):P.startsWith("#")?F.value=C.target.id===P.slice(1):(console.warn(`[free-dom] can not find element with ${P}`),F.value=!0):F.value=!0,F.value&&h(C,H)},u=(C,{node:H,width:P,height:L,handle:Y})=>{var pe;const X=-(P-(v.value||0)),Be=-(L-(m.value||0)),He=Y[0],Pe=Y[Y.length-1];let oe=d.value,re=l.value;He==="l"&&(oe+=X),Pe==="t"&&(re+=Be),(pe=o.check)!=null&&pe.call(o,{x:oe,y:re,width:P,height:L})&&(v.value=Math.round(P),m.value=Math.round(L),d.value=Math.round(oe),l.value=Math.round(re),e.resizeFn(C,{node:H,width:P,height:L,handle:Y}),o.emit("move",o.manualDiff.value?!C.shiftKey:C.shiftKey))},s=(C,H)=>{var L,Y;((L=o.check)==null?void 0:L.call(o,{x:d.value,y:l.value,width:v.value,height:m.value}))||(d.value=A(d.value,0,o.width),l.value=A(l.value,0,o.height)),e.resizeStopFn(C,H),a("update:w",v.value),a("update:h",m.value),a("update:modelValue",{x:d.value,y:l.value,w:v.value,h:m.value}),o.emit("moveup"),(Y=o.history)==null||Y.push({type:"resize-end"})},p=(C,H)=>{var P;(P=o.clearSelectState)==null||P.call(o),b.value=!0,e.resizeStartFn(C,H)},D=()=>{const C={width:v.value,height:m.value,lockAspectRatio:o.lockAspectRatio.value,dragOpts:{disabled:o.disabledResize.value,scale:o.transformScale.value},startFn:p,resizeFn:u,stopFn:s,minHeight:o.minHeight.value,minWidth:o.minWidth.value,scale:o.scale.value};return W(Ne,{},C)(n)};function B(C){var H,P,L;o.disabledSelect.value||(C.ctrlKey?(b.value=!b.value,(H=o.history)==null||H.push({type:"select"})):b.value||((P=o.clearSelectState)==null||P.call(o),b.value=!0,(L=o.history)==null||L.push({type:"select"})))}function I(C){var L;if(o.disabledDrag.value||!o.keyboard.value)return;switch(C.preventDefault(),C.key){case"ArrowUp":r.value=-1,y.value=0;break;case"ArrowDown":r.value=1,y.value=0;break;case"ArrowLeft":y.value=-1,r.value=0;break;case"ArrowRight":y.value=1,r.value=0;break;default:y.value=0,r.value=0}d.value+=y.value,l.value+=r.value;const H={x:d.value,y:l.value,width:v.value,height:m.value};((L=o.check)==null?void 0:L.call(o,H))||(d.value=A(d.value,0,(o.width||0)-(v.value||0)),l.value=A(l.value,0,(o.height||0)-(m.value||0))),a("update:x",d.value),a("update:y",l.value),a("update:modelValue",{x:d.value,y:l.value,w:v.value,h:m.value}),o.emit("move",!0)}return t==null||t({syncSize:w}),{itemMask:o.mask,selected:b,domRef:f,style:M,reset(){o.emit("moveup")},onDragStop:$,onDrag:R,onDragStart:x,resizeNode:D,handleKeyboard:I,handleSelect:B,disabled:o.disabledDrag,scale:o.transformScale}},render(){var t;const e={startFn:this.onDragStart,stopFn:this.onDragStop,dragFn:this.onDrag,disabled:this.disabled,scale:this.scale},a=()=>this.resizeNode();return(t=W(ye,{ref:"domRef",tabindex:-1,class:["vv-free-dom--draggable",this.disabled&&"vv-free-dom--draggable__disabled",(this.active||this.selected)&&"vv-free-dom--draggable__selected",this.itemMask&&"vv-free-dom--draggable__mask"],style:this.style},e,{nativeOnMousedown:this.handleSelect,nativeOnKeydown:this.handleKeyboard,nativeOnKeyup:this.reset,onBlur:this.reset}))==null?void 0:t(a)}}),xt=ze("freeDom:wrap"),Ct={diff:{type:Number,default:2},mask:O.mask,autoExpand:[Number,Boolean,Object],manualDiff:Boolean,showLine:{type:Boolean,default:!0},transformScale:{type:Number,default:1},keyboard:Boolean,disabledBatch:Boolean,handle:O.handle,width:{type:Number,default:void 0},height:{type:Number,default:void 0},minWidth:{type:Number,default:void 0},minHeight:{type:Number,default:void 0},lockAspectRatio:O.lockAspectRatio,disabledDrag:O.disabledDrag,disabledResize:O.disabledResize,disabledSelect:O.disabledSelect,scale:O.scale,fixNonMonospaced:O.fixNonMonospaced},Dt=V({name:"FreeDomWrap",props:Ct,emits:["batch-select","drop","update:width","update:height"],setup(e,{emit:a}){const t=ge(),n=S([]),f=Se(n),c=S(e.width),g=S(e.height),d=te(),l=xe(d),y=z(()=>({height:g.value+"px",width:c.value+"px"}));K(()=>{c.value=e.width,g.value=e.height}),ne([l.width,l.height,()=>n.value.length],([o,w])=>{xt("update size"),!(!o||!w)&&(c.value=o,g.value=w,a("update:width",o),a("update:height",w),N())},{immediate:!0});const r=z(()=>n.value.filter(o=>o.node.selected)),i=o=>{let w=e.autoExpand,F=e.autoExpand;if(typeof e.autoExpand=="object"&&(w=e.autoExpand.width,F=e.autoExpand.height),!w&&!F)return;const M=typeof w=="number"?w:10,R=typeof F=="number"?F:10,{x:$=0,width:x=0,y:u=0,height:s=0}=o.node._rect;w&&c.value&&$+x>=c.value&&(c.value+=M),F&&g.value&&u+s>=g.value&&(g.value+=R)};t.on("move",o=>{const w=r.value.find(R=>R.uuid===o);if(!w)return;e.autoExpand&&i(w);const{deltaX:F,deltaY:M}=w.node._rect;r.value.forEach(R=>{R.uuid!==o&&(R.node._rect.x+=F||0,R.node._rect.y+=M||0)})}),t.on("batch-select",(o,w)=>{o==="end"&&a("batch-select",w)});const h=S(!1),_=yt(d,e,n,{width:c,height:g});function N(){n.value.forEach(o=>{const w=e.minWidth||o.node.props.minWidth,F=e.minHeight||o.node.props.minHeight,{x:M,y:R,width:$,height:x}=b(o.node._rect,w,F);o.node._rect.x=M,o.node._rect.y=R,o.node._rect.width=$,o.node._rect.height=x,o.node.trigger({x:M,y:R,w:$,h:x})})}function v(o,w,F){n.value.push({el:o,uuid:w,node:F})}function m(o){const w=n.value.findIndex(F=>F.uuid===o);n.value.splice(w,1)}function E(o){if(!c.value||!g.value)return!1;const{x:w,y:F,width:M,height:R}=o;return w>=0&&w+M<=c.value&&F>=0&&F+R<=g.value}function b(o,w,F){let M=Math.max(o.x,0),R=Math.max(o.y,0),$=o.width,x=o.height;const u=c.value||0,s=g.value||0;return o.x+o.width>u&&(M=u-o.width,M<0&&($=Math.max(u,w),M=0)),o.y+o.height>s&&(R=s-o.height,R<0&&(x=Math.max(s,F),R=0)),{x:M,y:R,width:$,height:x}}function k(){r.value.forEach(o=>{o.node.selected=!1})}return _e(me,U({...ke(e),nodes:n,width:c,height:g,history:f,clearSelectState:k,register:v,remove:m,checkValid:E,correct:b,on:t.on,off:t.off,emit:t.emit})),{rectRef:d,selecting:h,mask:_,history:f,wrapStyle:y}},render(){const{slots:e}=ae(),a=W(ot,{},{showLine:this.showLine})(),t=[this.mask.selecting&&this.mask.renderMask(),e,a],n=W("section",{ref:"rectRef",class:"vv-free-dom--scene",style:this.wrapStyle})(t);return(c=>W("section",{},{},{onMousedown:this.mask.handleMousedown,onMousemove:this.mask.handleMousemove,ondrop:g=>{this.$emit("drop",g)},ondragover:g=>{g.preventDefault()}})(c))(n)}}),Re=Symbol("gridLayoutContext"),T=()=>{},_t={x:{type:Number,required:!0},y:{type:Number,required:!0},width:{type:Number,required:!0},height:{type:Number,required:!0},dragStartFn:{type:Function,default:T},dragFn:{type:Function,default:T},dragEndFn:{type:Function,default:T},resizeStartFn:{type:Function,default:T},resizeFn:{type:Function,default:T},resizeStopFn:{type:Function,default:T},isDraggable:Boolean,isResizable:Boolean,scale:{type:J.scale.type,default:()=>["rb"]},droppingPosition:{type:Object,default:void 0}},kt=["dragMove"],Fe=V({name:"GridItem",props:_t,emits:kt,setup(e){const a=S(),t=ve(Re);if(!t)throw new Error("TODO");ee(()=>{n()}),ne(()=>e.droppingPosition,(o,w)=>{n(w)},{deep:!0});function n(o){var R;if(!e.droppingPosition)return;const w=(R=a.value)==null?void 0:R.$el;if(!w)return;const F=o||{left:0,top:0},M=l.value&&e.droppingPosition.left!==F.left||e.droppingPosition.top!==F.top;if(!l.value)h(e.droppingPosition.evt,{node:w,deltaX:e.droppingPosition.left,deltaY:e.droppingPosition.top,x:0,y:0,lastX:0,lastY:0});else if(M){const $=e.droppingPosition.left-F.left,x=e.droppingPosition.top-F.top;_(e.droppingPosition.evt,{node:w,deltaX:$,deltaY:x,x:0,y:0,lastX:0,lastY:0})}}const{x:f,y:c,width:g,height:d,dragging:l,style:y,minWidth:r,minHeight:i,onDragStart:h,onDrag:_,onDragStop:N,onResizeStart:v,onResize:m,onResizeStop:E}=dt(e,t),b=o=>{const w={width:g.value,height:d.value,scale:e.scale,dragOpts:{disabled:!e.isResizable},minWidth:r.value,minHeight:i.value,startFn:v,resizeFn:m,stopFn:E};return W(Ne,{},w)(()=>o)};return{x:f,y:c,width:g,height:d,style:y,dragging:l,onDragStart:h,onDrag:_,onDragStop:N,onResizeStart:v,onResize:m,onResizeStop:E,dragNode:o=>{const w={class:[l.value&&"vv-grid-layout--item__draggable","vv-grid-layout--item",!e.isDraggable&&"vv-grid-layout--item__disabled"],style:y.value,ref:a},F={disabled:!e.isDraggable,startFn:h,stopFn:N,dragFn:_};return W(ye,w,F)(()=>b(o))}}},render(){const{slots:e}=ae(),a=e;return this.dragNode(a)}});function Mt(e,a){const t=S(),n=S();function f(c){c.preventDefault(),c.stopPropagation();const g=c.currentTarget.getBoundingClientRect(),d=c.clientX-g.left,l=c.clientY-g.top,y={left:d,top:l,evt:c};if(t.value){if(n.value){const{left:r,top:i}=n.value;r!==d&&i!==l&&(n.value=y)}}else{t.value=W("div",{key:a.droppingItem.i}),n.value=y;const r={cols:a.cols,margin:a.margin,maxRows:a.maxRows,rowHeight:a.rowHeight,width:a.width,containerPadding:a.containerPadding||a.margin},i=tt(r,d,l,a.droppingItem.w,a.droppingItem.h);e.updateDroppingItem({...a.droppingItem,x:i.x,y:i.y,static:!1,isDraggable:!0})}}return{onDropover:f,droppingNode:t,position:n}}const zt={droppable:Boolean,droppingItem:{type:Object,default:()=>({i:"__dropping-elem__",w:1,h:1})},modelValue:{type:Array,required:!0,default:()=>[]},autoHeight:{type:Boolean,default:!0},cols:{type:Number,default:12},maxRows:{type:Number,default:1/0},minW:{type:Number,default:1},minH:{type:Number,default:1},rowHeight:{type:Number,default:150},width:{type:Number,default:1200},margin:{type:Array,default:()=>[10,10]},containerPadding:{type:Array,default:void 0},disabledDrag:Boolean,disabledResize:Boolean,collision:Boolean},St=V({name:"GridLayout",inheritAttrs:!1,props:zt,emits:["update:modelValue","dropItem"],setup(e,{emit:a}){const t=ct(U(ke(e))),n=Mt(t,e);_e(Re,t);const f=S(null);function c(h,_=!1){const N=h.key;if(!N)return;const v=t.getItem(String(N));if(!v)return;const m=!v.static&&!e.disabledDrag,E=!v.static&&!e.disabledResize,b={x:v.x,y:v.y,width:v.w,height:v.h,isDraggable:m,isResizable:E,scale:v.scale,droppingPosition:_?n.position.value:void 0,dragEndFn:(k,o)=>{const{x:w,y:F}=o,M=t.moveTo(v,w,F);a("update:modelValue",M),f.value=null},dragStartFn:()=>{},dragFn:(k,o)=>{if(!v)return;const w={x:v.x,y:v.y,width:v.w,height:v.h},{x:F,y:M}=o;t.moveTo(v,F,M),f.value=w},resizeFn:(k,o)=>{const w={x:v.x,y:v.y,width:v.w,height:v.h};f.value=w;const{w:F,h:M}=o;t.resizeTo(v,F,M)},resizeStopFn:(k,o)=>{const{w,h:F}=o,M=t.resizeTo(v,w,F);a("update:modelValue",M),f.value=null}};return W(Fe,{},b)({default:()=>h})}function g(){if(!f.value)return null;const{x:h,y:_,width:N,height:v}=f.value;return W(Fe,{class:"vv-grid-layout--placeholder"},{x:h,y:_,width:N,height:v,move:!1})()}function d(){const h=t.getFull(),_=t.normalize(h.filter(N=>N.i!==e.droppingItem.i));t.setFull(_)}let l=0;function y(h){h.stopPropagation(),h.preventDefault();const _=t.getItem(e.droppingItem.i);d(),n.droppingNode.value=null,n.position.value=null,f.value=null,l=0,a("dropItem",_)}function r(h){h.stopPropagation(),h.preventDefault(),--l,l===0&&d()}function i(h){h.stopPropagation(),h.preventDefault(),++l}return{processItem:c,placeholder:g,onDrop:y,onDragLeave:r,onDragEnter:i,layout:t,droppingItem:n}},render(){const e={...this.$attrs.style||{},height:this.layout.calContainerHeight()},t=[...(Array.isArray(this.$attrs.class)?this.$attrs.class:[this.$attrs.class])||[],"vv-grid-layout"],n=typeof this.$slots.default=="function"?this.$slots.default():this.$slots.default||[],f=Ee(n);return G("div",{class:t,style:e,onDragover:this.droppable?this.droppingItem.onDropover:Q,onDrop:this.droppable?this.onDrop:Q,onDragleave:this.droppable?this.onDragLeave:Q,onDragenter:this.droppable?this.onDragEnter:Q},[f.map(c=>(c.type===he&&this.processItem(c),this.processItem(c))),this.droppable&&this.droppingItem.droppingNode.value&&this.processItem(this.droppingItem.droppingNode.value(),!0),this.placeholder()])}});function Q(){}function Ee(e){const a=[];return e.forEach(t=>{t.type===he&&Array.isArray(t.children)?a.push(...Ee(t.children)):a.push(t)}),a}const It=Dt,$t=St,Lt=Ft;export{Lt as F,$t as G,Bt as _,It as a,ft as b,Ht as c,Pt as g};
